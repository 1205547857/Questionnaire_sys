import{A as F,B as J,d as ae,u as ue,c as Q,C as re,j as $,l as de,a as o,o as n,b as e,f as d,e as f,t as r,w as R,g as _,v as D,F as h,h as m,i as P,n as x,z as ce,D as pe,_ as ve}from"./index-BuxX1puY.js";import{c as fe}from"./question_create-CQqc0PA0.js";async function ye(c){try{const p=F("authToken"),u=await J.get(`http://localhost:8081/question/search/${c}`,{headers:{Authorization:`Bearer ${p}`}});return u.status===200&&u.data?u.data:(console.error("Failed to get question:",u),null)}catch(p){return console.error("Error getting question by ID:",p),null}}async function he(c){try{console.log("Updating question with data:",c);const p=F("authToken"),u=await J.post("http://localhost:8081/question/edit",c,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(u.status===200){console.log("Question updated successfully"),console.log("Update response:",u.data);const y=u.data?.questionId||u.data?.id;return y&&y!==c.questionId?(console.log(`Question ID changed: ${c.questionId} -> ${y}`),{success:!0,message:"问题更新成功，问题ID已更新",newQuestionId:y}):{success:!0,message:"问题更新成功"}}return console.error("Failed to update question:",u),{success:!1,message:"更新失败，请稍后重试"}}catch(p){return console.error("Error updating question:",p),{success:!1,message:"网络错误，请检查连接"}}}function me(c){try{if(!c||c.trim()==="")return[];const p=JSON.parse(c);return Array.isArray(p)?p:c.split(",").map(u=>u.trim()).filter(u=>u)}catch(p){return console.warn("Failed to parse question options:",p),c.split(",").map(u=>u.trim()).filter(u=>u)}}function be(c,p=!1){if(!c||c.length===0)return[{text:"",children:[]},{text:"",children:[]}];if(p){const u={};return c.forEach(y=>{if(y.includes(" > ")){const[v,w]=y.split(" > ");u[v]||(u[v]=[]),u[v].push(w)}else u[y]||(u[y]=[])}),Object.keys(u).map(y=>({text:y,children:u[y].map(v=>({text:v}))}))}else return c.map(u=>({text:u,children:[]}))}const ge={class:"question-create-container"},we={class:"question-create-card"},ke={class:"card-header"},_e={class:"page-title"},xe={class:"page-subtitle"},qe={key:0,class:"loading-section"},$e={key:1,class:"error-section"},Ce={class:"error-content"},Oe={style:{"margin-top":"1rem"}},Te={key:2,class:"card-content"},Ie={class:"form-section"},Ne={class:"form-group"},Ae={class:"form-group"},Qe={class:"form-group"},De={class:"question-types"},Me=["onClick"],Ue={key:0,class:"form-section"},Ve={key:0,class:"nested-options-controls"},Ee={class:"checkbox-label"},Pe={class:"options-container"},Fe={class:"option-input-group"},Be={class:"option-index"},Se=["onUpdate:modelValue","placeholder"],ze=["onClick"],je=["onClick"],Le={key:0,class:"child-options-container"},Re={class:"child-option-input-group"},Je={class:"child-option-index"},Ge=["onUpdate:modelValue"],He=["onClick"],Ke={class:"form-section"},We={class:"settings-grid"},Xe={key:0,class:"setting-item"},Ye={class:"checkbox-label"},Ze={class:"setting-item"},et={class:"checkbox-label"},tt={class:"form-section"},st={class:"question-preview"},lt={class:"preview-question"},ot={class:"preview-title"},nt={key:0,class:"preview-description"},it={class:"preview-content"},at={key:0,class:"preview-options"},ut=["name"],rt={key:0,class:"preview-option"},dt=["name"],ct={key:1,class:"preview-options"},pt={key:0,class:"preview-option"},vt={key:2,class:"preview-dropdown"},ft={key:0,class:"simple-dropdown"},yt={class:"preview-select",disabled:""},ht=["value"],mt={key:0,value:"other"},bt={key:0,class:"other-input-container",style:{"margin-top":"0.8rem",display:"none"}},gt={key:1,class:"nested-dropdown"},wt={class:"dropdown-level"},kt={class:"preview-select",disabled:""},_t=["value"],xt={key:3,class:"preview-text"},qt={class:"form-actions"},$t=["disabled"],Ct=["disabled"],Ot={class:"message-content"},Tt={class:"modal-body"},It={class:"preview-content"},Nt={class:"preview-questions"},At={class:"preview-question"},Qt={class:"question-header"},Dt={class:"question-title"},Mt={class:"question-type-indicator"},Ut={key:0,class:"question-description"},Vt={class:"question-preview-content"},Et={key:0,class:"options-preview"},Pt=["name"],Ft={key:0,class:"option-item single-option"},Bt=["name"],St={key:1,class:"options-preview"},zt={key:0,class:"option-item multiple-option"},jt={key:2,class:"options-preview"},Lt={key:0,class:"simple-dropdown"},Rt={class:"dropdown-preview",disabled:""},Jt=["value"],Gt={key:0,value:"other"},Ht={key:1,class:"nested-dropdown"},Kt={class:"dropdown-level"},Wt={class:"dropdown-preview",disabled:""},Xt=["value"],Yt={key:3,class:"text-preview"},Zt={key:4,class:"unknown-type"},es={class:"preview-footer"},ts={class:"preview-stats"},ss={class:"stat-item"},ls={key:0,class:"stat-item"},os={class:"modal-footer"},ns=["disabled"],is=ae({__name:"question_center_edit",setup(c){const p=re(),u=ce(),y=ue(),v=Q(()=>!!p.params.id),w=Q(()=>p.params.id),G=[{value:"single",label:"单选题",icon:"fas fa-dot-circle"},{value:"multiple",label:"多选题",icon:"fas fa-check-square"},{value:"text",label:"文本题",icon:"fas fa-align-left"},{value:"dropdown",label:"下拉选择题",icon:"fas fa-chevron-down"}],M=$(!1),k=$(!1),O=$(""),s=$({title:"",description:"",type:"single",options:[{text:"",children:[]},{text:"",children:[]}],allowOther:!1,isNested:!1,shared:!1}),q=$({text:"",type:"success"}),U=$(!1),I=$(null),b=Q(()=>["single","multiple","dropdown"].includes(s.value.type)),T=Q(()=>s.value.title.trim()?b.value?s.value.options.some(i=>i.text.trim()):!0:!1);function H(i){s.value.type=i,b.value&&s.value.options.length===0&&(s.value.options=[{text:"",children:[]},{text:"",children:[]}])}function K(){s.value.options.push({text:"",children:[]})}function W(i){s.value.options[i].children||(s.value.options[i].children=[]),s.value.options[i].children.push({text:""})}function X(i,t){s.value.options[i].children.splice(t,1)}function Y(i){s.value.options.length>2&&s.value.options.splice(i,1)}function Z(){v.value&&I.value?z(I.value):(s.value.title="",s.value.description="",s.value.type="single",s.value.options=[{text:"",children:[]},{text:"",children:[]}],s.value.allowOther=!1,s.value.isNested=!1,s.value.shared=!1),V()}function ee(){if(!T.value){g("请填写完整的问题信息","error");return}U.value=!0}function N(){U.value=!1}function A(){if(!b.value)return[];const i=[];return s.value.options.forEach(t=>{t.text.trim()&&(s.value.isNested&&t.children&&t.children.length>0?t.children.forEach(l=>{l.text.trim()&&i.push(`${t.text} > ${l.text}`)}):i.push(t.text))}),i}function te(){s.value.shared?g("问题已设为共享状态","success"):g("已取消共享状态","info")}function B(i){return{single:"单选题",multiple:"多选题",text:"文本题",dropdown:"下拉选择题"}[i]||"未知类型"}function se(i){return{single:"fas fa-dot-circle",multiple:"fas fa-check-square",text:"fas fa-align-left",dropdown:"fas fa-chevron-down"}[i]||"fas fa-question-circle"}function le(){if(!b.value)return[];const i=[];return s.value.options.forEach(t=>{t.text.trim()&&(s.value.isNested&&t.children&&t.children.length>0?t.children.forEach(l=>{l.text.trim()&&i.push(`${t.text} > ${l.text}`)}):i.push(t.text))}),i}async function S(){if(!T.value){g("请填写完整的问题信息","error");return}k.value=!0;try{const i=le(),t=JSON.stringify(i);if(v.value){const l={questionId:w.value,questionType:s.value.type,questionOptions:t,canDelete:I.value?.canDelete||0,questionTitle:s.value.title,questionTxt:s.value.description,shared:s.value.shared?1:0},a=await he(l);a.success?(g(a.message||"问题更新成功！","success"),a.newQuestionId&&(y.updateQuestionId(w.value,a.newQuestionId),console.log(`Updated user question ID mapping: ${w.value} -> ${a.newQuestionId}`)),setTimeout(()=>{u.push("/page/question_center_my")},1500)):g(a.message||"更新失败，请稍后重试","error")}else await fe(s.value.type,t,s.value.title,s.value.description),console.log("保存问题:",{type:s.value.type,options:i,optionsString:t,title:s.value.title,description:s.value.description}),g("问题保存成功！","success")}catch(i){console.error("保存问题失败:",i),g("保存失败，请稍后重试","error")}finally{k.value=!1}}function z(i){s.value.title=i.questionTitle,s.value.description=i.questionTxt||"",s.value.type=i.questionType,s.value.shared=i.shared===1;const t=me(i.questionOptions),l=t.some(a=>a.includes(" > "));if(s.value.isNested=l&&i.questionType==="dropdown",s.value.options=be(t,s.value.isNested),b.value&&s.value.options.length<2)for(;s.value.options.length<2;)s.value.options.push({text:"",children:[]})}async function j(){if(v.value){console.log("开始加载问题详情, ID:",w.value),M.value=!0,O.value="";try{console.log("调用API获取问题详情...");const i=await ye(w.value);if(console.log("API返回结果:",i),!i){O.value="问题不存在或已被删除",console.error("问题详情为空");return}I.value=i,z(i),console.log("问题数据加载完成")}catch(i){console.error("加载问题详情失败:",i),O.value="加载问题信息失败，请稍后重试"}finally{M.value=!1}}}function g(i,t){q.value.text=i,q.value.type=t,setTimeout(()=>{V()},3e3)}function V(){q.value.text=""}function oe(i){return{success:"fas fa-check-circle",error:"fas fa-exclamation-circle",warning:"fas fa-exclamation-triangle",info:"fas fa-info-circle"}[i]||"fas fa-info-circle"}function ne(){console.log("重试加载问题详情"),j()}async function ie(){console.log("测试API连接...");try{const i=F("authToken");console.log("当前AuthToken:",i);const t=`http://localhost:8081/question/search/${w.value}`;console.log("测试URL:",t);const l=await fetch(t,{headers:{Authorization:`Bearer ${i}`}});console.log("响应状态:",l.status);const a=await l.text();console.log("响应数据:",a),g(`API测试完成，状态: ${l.status}`,l.ok?"success":"error")}catch(i){console.error("API测试失败:",i),g("API测试失败，请检查控制台","error")}}return de(()=>{console.log("组件已挂载"),console.log("当前路由参数:",p.params),console.log("编辑模式:",v.value),console.log("问题ID:",w.value),v.value?(console.log("进入编辑模式，开始加载问题详情"),j()):console.log("创建模式，跳过数据加载")}),(i,t)=>(n(),o("div",ge,[e("div",we,[e("div",ke,[e("h1",_e,[t[9]||(t[9]=e("i",{class:"fas fa-edit"},null,-1)),f(" "+r(v.value?"编辑问题":"创建问题"),1)]),e("p",xe,r(v.value?"修改您的问卷问题信息":"设计您的问卷问题，支持多种题型"),1)]),M.value?(n(),o("div",qe,[...t[10]||(t[10]=[e("div",{class:"loading-spinner"},[e("i",{class:"fas fa-spinner fa-spin"}),e("p",null,"正在加载问题信息...")],-1)])])):O.value?(n(),o("div",$e,[e("div",Ce,[t[11]||(t[11]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),t[12]||(t[12]=e("h3",null,"加载失败",-1)),e("p",null,r(O.value),1),e("div",Oe,[e("button",{onClick:ne,class:"btn btn-primary",style:{"margin-right":"0.5rem"}},"重试"),e("button",{onClick:ie,class:"btn btn-warning",style:{"margin-right":"0.5rem"}},"测试API"),e("button",{onClick:t[0]||(t[0]=l=>i.$router.go(-1)),class:"btn btn-secondary"},"返回")])])])):(n(),o("div",Te,[e("form",{onSubmit:R(S,["prevent"]),class:"question-form"},[e("div",Ie,[t[16]||(t[16]=e("h3",{class:"section-title"},[e("i",{class:"fas fa-info-circle"}),f(" 基本信息 ")],-1)),e("div",Ne,[t[13]||(t[13]=e("label",{class:"field-label",for:"questionTitle"},"问题标题 *",-1)),_(e("input",{id:"questionTitle","onUpdate:modelValue":t[1]||(t[1]=l=>s.value.title=l),type:"text",class:"form-input",placeholder:"请输入问题标题",required:""},null,512),[[D,s.value.title]])]),e("div",Ae,[t[14]||(t[14]=e("label",{class:"field-label",for:"questionDescription"},"问题描述",-1)),_(e("textarea",{id:"questionDescription","onUpdate:modelValue":t[2]||(t[2]=l=>s.value.description=l),class:"form-textarea",placeholder:"请输入问题的详细描述（可选）",rows:"3"},null,512),[[D,s.value.description]])]),e("div",Qe,[t[15]||(t[15]=e("label",{class:"field-label"},"问题类型 *",-1)),e("div",De,[(n(),o(h,null,m(G,l=>e("div",{key:l.value,class:x(["type-option",{active:s.value.type===l.value}]),onClick:a=>H(l.value)},[e("i",{class:x(l.icon)},null,2),e("span",null,r(l.label),1)],10,Me)),64))])])]),b.value?(n(),o("div",Ue,[t[24]||(t[24]=e("h3",{class:"section-title"},[e("i",{class:"fas fa-list"}),f(" 选项配置 ")],-1)),s.value.type==="dropdown"?(n(),o("div",Ve,[e("label",Ee,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=l=>s.value.isNested=l),class:"checkbox-input"},null,512),[[P,s.value.isNested]]),t[17]||(t[17]=e("span",{class:"checkbox-custom"},null,-1)),t[18]||(t[18]=e("span",{class:"checkbox-text"},"启用多级下拉列表（如：国家-省份-城市）",-1))])])):d("",!0),e("div",Pe,[(n(!0),o(h,null,m(s.value.options,(l,a)=>(n(),o("div",{key:a,class:x(["option-item",{"nested-option":s.value.isNested&&s.value.type==="dropdown"}])},[e("div",Fe,[e("span",Be,r(a+1),1),_(e("input",{"onUpdate:modelValue":C=>l.text=C,type:"text",class:"option-input",placeholder:s.value.isNested?`一级选项 ${a+1}（如：中国）`:`选项 ${a+1}`,required:""},null,8,Se),[[D,l.text]]),s.value.isNested&&s.value.type==="dropdown"?(n(),o("button",{key:0,type:"button",class:"add-child-btn",onClick:C=>W(a),title:"添加子选项"},[...t[19]||(t[19]=[e("i",{class:"fas fa-plus"},null,-1)])],8,ze)):d("",!0),s.value.options.length>2?(n(),o("button",{key:1,type:"button",class:"remove-option-btn",onClick:C=>Y(a)},[...t[20]||(t[20]=[e("i",{class:"fas fa-times"},null,-1)])],8,je)):d("",!0)]),s.value.isNested&&s.value.type==="dropdown"&&l.children&&l.children.length>0?(n(),o("div",Le,[(n(!0),o(h,null,m(l.children,(C,E)=>(n(),o("div",{key:E,class:"child-option-item"},[e("div",Re,[t[22]||(t[22]=e("span",{class:"child-option-connector"},"└─",-1)),e("span",Je,r(a+1)+"."+r(E+1),1),_(e("input",{"onUpdate:modelValue":L=>C.text=L,type:"text",class:"child-option-input",placeholder:"子选项（如：江西省）",required:""},null,8,Ge),[[D,C.text]]),e("button",{type:"button",class:"remove-child-option-btn",onClick:L=>X(a,E)},[...t[21]||(t[21]=[e("i",{class:"fas fa-times"},null,-1)])],8,He)])]))),128))])):d("",!0)],2))),128)),e("button",{type:"button",class:"add-option-btn",onClick:K},[t[23]||(t[23]=e("i",{class:"fas fa-plus"},null,-1)),f(" "+r(s.value.isNested&&s.value.type==="dropdown"?"添加一级选项":"添加选项"),1)])])])):d("",!0),e("div",Ke,[t[30]||(t[30]=e("h3",{class:"section-title"},[e("i",{class:"fas fa-cog"}),f(" 问题设置 ")],-1)),e("div",We,[s.value.type==="multiple"?(n(),o("div",Xe,[e("label",Ye,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=l=>s.value.allowOther=l),class:"checkbox-input"},null,512),[[P,s.value.allowOther]]),t[25]||(t[25]=e("span",{class:"checkbox-custom"},null,-1)),t[26]||(t[26]=e("span",{class:"checkbox-text"},"允许填写其他选项",-1))])])):d("",!0),e("div",Ze,[e("label",et,[_(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=l=>s.value.shared=l),onChange:te,class:"checkbox-input"},null,544),[[P,s.value.shared]]),t[27]||(t[27]=e("span",{class:"checkbox-custom"},null,-1)),t[28]||(t[28]=e("span",{class:"checkbox-text"},"设为共享问题",-1))]),t[29]||(t[29]=e("p",{class:"setting-description"}," 共享问题可以被其他用户引用和使用 ",-1))])])]),e("div",tt,[t[40]||(t[40]=e("h3",{class:"section-title"},[e("i",{class:"fas fa-eye"}),f(" 问题预览 ")],-1)),e("div",st,[e("div",lt,[e("h4",ot,r(s.value.title||"问题标题"),1),s.value.description?(n(),o("p",nt,r(s.value.description),1)):d("",!0),e("div",it,[s.value.type==="single"?(n(),o("div",at,[(n(!0),o(h,null,m(s.value.options,(l,a)=>(n(),o("div",{key:a,class:"preview-option"},[e("input",{type:"radio",name:`preview-${Date.now()}`,disabled:""},null,8,ut),e("span",null,r(l.text||`选项 ${a+1}`),1)]))),128)),s.value.allowOther?(n(),o("div",rt,[e("input",{type:"radio",name:`preview-${Date.now()}`,disabled:""},null,8,dt),t[31]||(t[31]=e("span",null,"其他：",-1)),t[32]||(t[32]=e("input",{type:"text",placeholder:"请填写",disabled:"",class:"other-input"},null,-1))])):d("",!0)])):s.value.type==="multiple"?(n(),o("div",ct,[(n(!0),o(h,null,m(s.value.options,(l,a)=>(n(),o("div",{key:a,class:"preview-option"},[t[33]||(t[33]=e("input",{type:"checkbox",disabled:""},null,-1)),e("span",null,r(l.text||`选项 ${a+1}`),1)]))),128)),s.value.allowOther?(n(),o("div",pt,[...t[34]||(t[34]=[e("input",{type:"checkbox",disabled:""},null,-1),e("span",null,"其他：",-1),e("input",{type:"text",placeholder:"请填写",disabled:"",class:"other-input"},null,-1)])])):d("",!0)])):s.value.type==="dropdown"?(n(),o("div",vt,[s.value.isNested?(n(),o("div",gt,[e("div",wt,[e("select",kt,[t[37]||(t[37]=e("option",{value:""},"请选择一级选项...",-1)),(n(!0),o(h,null,m(s.value.options,(l,a)=>(n(),o("option",{key:a,value:l.text},r(l.text||`一级选项 ${a+1}`),9,_t))),128))])]),t[38]||(t[38]=e("div",{class:"dropdown-level"},[e("select",{class:"preview-select",disabled:""},[e("option",{value:""},"请先选择一级选项...")])],-1))])):(n(),o("div",ft,[e("select",yt,[t[35]||(t[35]=e("option",{value:""},"请选择...",-1)),(n(!0),o(h,null,m(s.value.options,(l,a)=>(n(),o("option",{key:a,value:l.text},r(l.text||`选项 ${a+1}`),9,ht))),128)),s.value.allowOther?(n(),o("option",mt,"其他")):d("",!0)]),s.value.allowOther?(n(),o("div",bt,[...t[36]||(t[36]=[e("label",{class:"other-label"},"请填写其他选项：",-1),e("input",{type:"text",placeholder:"请填写",disabled:"",class:"other-input"},null,-1)])])):d("",!0)]))])):s.value.type==="text"?(n(),o("div",xt,[...t[39]||(t[39]=[e("textarea",{class:"preview-textarea",placeholder:"请在此输入您的答案...",disabled:"",rows:"4"},null,-1)])])):d("",!0)])])])]),e("div",qt,[e("button",{type:"button",onClick:t[6]||(t[6]=l=>i.$router.go(-1)),class:"btn btn-secondary"},[...t[41]||(t[41]=[e("i",{class:"fas fa-arrow-left"},null,-1),f(" 返回 ",-1)])]),e("button",{type:"button",onClick:ee,class:"btn btn-info",disabled:!T.value},[...t[42]||(t[42]=[e("i",{class:"fas fa-eye"},null,-1),f(" 预览 ",-1)])],8,$t),v.value?d("",!0):(n(),o("button",{key:0,type:"button",onClick:Z,class:"btn btn-warning"},[...t[43]||(t[43]=[e("i",{class:"fas fa-undo"},null,-1),f(" 重置 ",-1)])])),e("button",{type:"submit",class:"btn btn-primary",disabled:!T.value||k.value},[e("i",{class:x(k.value?"fas fa-spinner fa-spin":v.value?"fas fa-save":"fas fa-plus")},null,2),f(" "+r(k.value?"保存中...":v.value?"保存修改":"创建问题"),1)],8,Ct)])],32),q.value.text?(n(),o("div",{key:0,class:x(["message-container",q.value.type])},[e("div",Ot,[e("i",{class:x(oe(q.value.type))},null,2),e("span",null,r(q.value.text),1),e("button",{onClick:V,class:"message-close"},[...t[44]||(t[44]=[e("i",{class:"fas fa-times"},null,-1)])])])],2)):d("",!0)]))]),U.value?(n(),o("div",{key:0,class:"modal-overlay",onClick:N},[e("div",{class:"modal-content large-modal preview-modal",onClick:t[8]||(t[8]=R(()=>{},["stop"]))},[e("div",{class:"modal-header"},[t[46]||(t[46]=e("h3",null,[e("i",{class:"fas fa-eye"}),f(" 问题预览 ")],-1)),e("button",{onClick:N,class:"close-btn"},[...t[45]||(t[45]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",Tt,[e("div",It,[e("div",Nt,[e("div",At,[e("div",Qt,[t[47]||(t[47]=e("span",{class:"question-number"},"1.",-1)),e("h3",Dt,r(s.value.title||"问题标题"),1),e("span",Mt,[e("i",{class:x(se(s.value.type))},null,2),f(" "+r(B(s.value.type)),1)])]),s.value.description?(n(),o("div",Ut,r(s.value.description),1)):d("",!0),e("div",Vt,[s.value.type==="single"&&b.value?(n(),o("div",Et,[(n(!0),o(h,null,m(A(),(l,a)=>(n(),o("div",{key:a,class:"option-item single-option"},[e("input",{type:"radio",name:`preview-single-${Date.now()}`,disabled:""},null,8,Pt),e("label",null,r(l),1)]))),128)),s.value.allowOther?(n(),o("div",Ft,[e("input",{type:"radio",name:`preview-single-${Date.now()}`,disabled:""},null,8,Bt),t[48]||(t[48]=e("label",null,[f("其他："),e("input",{type:"text",placeholder:"请填写",disabled:"",class:"other-input-inline"})],-1))])):d("",!0)])):s.value.type==="multiple"&&b.value?(n(),o("div",St,[(n(!0),o(h,null,m(A(),(l,a)=>(n(),o("div",{key:a,class:"option-item multiple-option"},[t[49]||(t[49]=e("input",{type:"checkbox",disabled:""},null,-1)),e("label",null,r(l),1)]))),128)),s.value.allowOther?(n(),o("div",zt,[...t[50]||(t[50]=[e("input",{type:"checkbox",disabled:""},null,-1),e("label",null,[f("其他："),e("input",{type:"text",placeholder:"请填写",disabled:"",class:"other-input-inline"})],-1)])])):d("",!0)])):s.value.type==="dropdown"&&b.value?(n(),o("div",jt,[s.value.isNested?(n(),o("div",Ht,[e("div",Kt,[t[53]||(t[53]=e("label",{class:"dropdown-label"},"一级选项：",-1)),e("select",Wt,[t[52]||(t[52]=e("option",{value:""},"请选择一级选项...",-1)),(n(!0),o(h,null,m(s.value.options,(l,a)=>_((n(),o("option",{key:a,value:l.text},r(l.text),9,Xt)),[[pe,l.text.trim()]])),128))])]),t[54]||(t[54]=e("div",{class:"dropdown-level"},[e("label",{class:"dropdown-label"},"二级选项："),e("select",{class:"dropdown-preview",disabled:""},[e("option",{value:""},"请先选择一级选项...")])],-1))])):(n(),o("div",Lt,[e("select",Rt,[t[51]||(t[51]=e("option",{value:""},"请选择...",-1)),(n(!0),o(h,null,m(A(),(l,a)=>(n(),o("option",{key:a,value:l},r(l),9,Jt))),128)),s.value.allowOther?(n(),o("option",Gt,"其他")):d("",!0)])]))])):s.value.type==="text"?(n(),o("div",Yt,[...t[55]||(t[55]=[e("textarea",{placeholder:"请在此输入您的答案...",rows:"3",disabled:"",class:"text-input-preview"},null,-1)])])):(n(),o("div",Zt,[...t[56]||(t[56]=[e("p",{class:"unknown-message"},[e("i",{class:"fas fa-exclamation-triangle"}),f(" 未知问题类型或配置不完整 ")],-1)])]))])])])]),e("div",es,[e("div",ts,[e("div",ss,[t[57]||(t[57]=e("i",{class:"fas fa-question-circle"},null,-1)),e("span",null,"问题类型："+r(B(s.value.type)),1)]),b.value?(n(),o("div",ls,[t[58]||(t[58]=e("i",{class:"fas fa-list"},null,-1)),e("span",null,"选项数量："+r(A().length)+"个",1)])):d("",!0)])])]),e("div",os,[e("button",{onClick:N,class:"btn btn-secondary"},[...t[59]||(t[59]=[e("i",{class:"fas fa-times"},null,-1),f(" 关闭预览 ",-1)])]),e("button",{onClick:t[7]||(t[7]=l=>{N(),S()}),class:"btn btn-primary",disabled:!T.value||k.value},[e("i",{class:x(k.value?"fas fa-spinner fa-spin":v.value?"fas fa-save":"fas fa-plus")},null,2),f(" "+r(k.value?"保存中...":v.value?"确认保存":"确认创建"),1)],8,ns)])])])):d("",!0)]))}}),rs=ve(is,[["__scopeId","data-v-089c8d59"]]);export{rs as default};
