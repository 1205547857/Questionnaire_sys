import{B as b,d as Z,j as w,r as ee,c as A,C as se,l as te,a as u,o as c,f as q,p as j,F as S,b as s,t as d,e as g,w as oe,h as P,n as R,a7 as ne,A as ie,g as D,a4 as ae,i as le,m as re,v as ue,a8 as ce,_ as de}from"./index-BuxX1puY.js";import{d as pe}from"./questionnaireCreate-Dz9MBAgv.js";const x="http://localhost:8081",M={questionnaire:"/questionnaire/search/{id}",model:"/model/search/{id}",question:"/question/search/{id}",submit:"/questionnaire/answer"},$=new Map;async function V(){try{return(await b.get(`${x}/health`,{timeout:3e3,headers:{"Content-Type":"application/json"}})).status===200}catch(l){return console.warn("API connection test failed:",l),!1}}async function fe(l){try{const o=`${x}${M.questionnaire.replace("{id}",l)}`;console.log("Fetching questionnaire by ID (public access):",l),console.log("Request URL:",o);const t=await b.get(o,{headers:{"Content-Type":"application/json"},timeout:1e4});return console.log("Questionnaire fetch response:",{status:t.status,statusText:t.statusText,data:t.data}),t.status===200&&t.data&&t.data!=="fail"?(console.log("Questionnaire fetched successfully:",t.data),t.data):(console.log("Questionnaire not found or failed to fetch"),null)}catch(o){if(console.error("Error fetching questionnaire:",o),b.isAxiosError(o)){const t=o.response?.status,n=o.response?.data?.message||o.message;console.log("Axios error details:",{status:t,message:n,url:o.config?.url,baseURL:o.config?.baseURL}),t===401?console.log("Authentication required, but this is public access"):t===404?console.log("Questionnaire not found (404)"):t===500?console.log("Server internal error (500)"):console.log("Other server error:",t)}return null}}async function ge(l){try{const o=`${x}${M.model.replace("{id}",l)}`;console.log("Fetching questionnaire model by ID (public access):",l),console.log("Request URL:",o);const t=await b.get(o,{headers:{"Content-Type":"application/json"},timeout:1e4});return console.log("Model fetch response:",t),t.status===200&&t.data&&t.data.modelId?(console.log("Model fetched successfully:",t.data),t.data):(console.log("Model not found or failed to fetch"),null)}catch(o){if(console.error("Error fetching model:",o),b.isAxiosError(o)){const t=o.response?.status;t===401?console.log("Authentication required, but this is public access"):t===404?console.log("Model not found"):console.log("Server error:",t)}return null}}async function ve(l){if($.has(l))return console.log("ä»ç¼“å­˜è·å–é—®é¢˜:",l),$.get(l)||null;try{const o=`${x}${M.question.replace("{id}",l)}`;console.log("Fetching question by ID (public access):",l),console.log("Request URL:",o);const t=await b.get(o,{headers:{"Content-Type":"application/json"},timeout:1e4});if(console.log("Question fetch response:",{status:t.status,statusText:t.statusText,data:t.data}),t.status===200&&t.data&&t.data!=="fail"){const n=t.data,a={id:String(n.id||n.questionId||l),type:String(n.type||n.questionType||"text"),title:String(n.title||n.questionTitle||n.questionTxt||"æœªå‘½åé—®é¢˜"),description:String(n.description||n.questionTxt||""),shared:Number(n.shared||0),options:Array.isArray(n.options)?n.options.map(String):n.questionOptions?typeof n.questionOptions=="string"?JSON.parse(n.questionOptions):Array.isArray(n.questionOptions)?n.questionOptions.map(String):[]:[]};return $.set(l,a),a}else return console.log("Question not found or failed to fetch"),$.set(l,null),null}catch(o){if(console.error("Error fetching question:",o),b.isAxiosError(o)){const t=o.response?.status;console.log("Question fetch error details:",{status:t,message:o.response?.data?.message||o.message,questionId:l})}return $.set(l,null),null}}async function ye(l){try{console.log("å¼€å§‹è§£æé—®é¢˜æ•°ç»„ï¼ŒåŸå§‹æ•°æ®:",l),console.log("æ•°æ®ç±»å‹:",typeof l);let o;if(typeof l=="string"){if(console.log("æ•°æ®é•¿åº¦:",l?.length),!l||l.trim()==="")return console.log("é—®é¢˜æ•°ç»„å­—ç¬¦ä¸²ä¸ºç©ºæˆ–æ— æ•ˆ"),[];o=JSON.parse(l)}else console.log("æ•°æ®å·²ç»æ˜¯å¯¹è±¡ï¼Œç›´æ¥ä½¿ç”¨"),o=l;if(console.log("JSONè§£æç»“æœ:",o),console.log("è§£æç»“æœç±»å‹:",typeof o),console.log("æ˜¯å¦ä¸ºæ•°ç»„:",Array.isArray(o)),!Array.isArray(o))return console.log("è§£æç»“æœä¸æ˜¯æ•°ç»„"),[];if(console.log("è§£æåçš„æ•°ç»„é•¿åº¦:",o.length),o.length>0){console.log("æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ :",o[0]),console.log("ç¬¬ä¸€ä¸ªå…ƒç´ ç±»å‹:",typeof o[0]);const t=o[0];if(typeof t=="string"){console.log("æ£€æµ‹åˆ°é—®é¢˜IDæ•°ç»„æ ¼å¼ï¼Œéœ€è¦é€šè¿‡APIè·å–é—®é¢˜æ•°æ®"),console.log("é—®é¢˜IDåˆ—è¡¨:",o);const n=[];for(let a=0;a<o.length;a++){const f=o[a];console.log(`æ­£åœ¨è·å–é—®é¢˜ ${a+1}/${o.length}, ID: ${f}`);try{const m=await ve(f);m?(n.push(m),console.log(`é—®é¢˜ ${f} è·å–æˆåŠŸ:`,m.title)):(console.warn(`é—®é¢˜ ${f} è·å–å¤±è´¥ï¼Œä½¿ç”¨å ä½ç¬¦`),n.push({id:f,type:"text",title:`é—®é¢˜ ${a+1} (åŠ è½½å¤±è´¥)`,description:"é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·è”ç³»ç®¡ç†å‘˜",options:[]}))}catch(m){console.error(`è·å–é—®é¢˜ ${f} æ—¶å‡ºé”™:`,m),n.push({id:f,type:"text",title:`é—®é¢˜ ${a+1} (ç½‘ç»œé”™è¯¯)`,description:"é¢˜ç›®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥",options:[]})}}return console.log(`æ‰¹é‡è·å–é—®é¢˜å®Œæˆï¼ŒæˆåŠŸè·å– ${n.length} ä¸ªé—®é¢˜`),n}else if(typeof t=="object"&&t!==null)return console.log("æ£€æµ‹åˆ°é—®é¢˜å¯¹è±¡æ•°ç»„æ ¼å¼ï¼Œç›´æ¥è§£æ"),o.map(n=>({id:String(n.id||n.questionId||Math.random()),type:String(n.type||n.questionType||"text"),title:String(n.title||n.questionTitle||"æœªå‘½åé—®é¢˜"),description:String(n.description||n.questionTxt||""),options:Array.isArray(n.options)?n.options.map(String):n.questionOptions?typeof n.questionOptions=="string"?JSON.parse(n.questionOptions):n.questionOptions:[]}))}return console.log("æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•è§£æé€»è¾‘ï¼Œå°è¯•ç›´æ¥ä½¿ç”¨æ•°æ®"),Array.isArray(o)&&o.length===0?(console.log("æ•°ç»„ä¸ºç©ºï¼Œè¿”å›ç©ºç»“æœ"),[]):Array.isArray(o)&&o.length>0?(console.log("å°è¯•é€šç”¨è§£æ..."),o.map((t,n)=>{if(typeof t=="object"&&t!==null){const a=t;return{id:String(a.id||a.questionId||`question_${n+1}`),type:a.type||a.questionType||"text",title:String(a.title||a.questionTitle||a.questionTxt||`é—®é¢˜ ${n+1}`),description:String(a.description||a.questionTxt||""),shared:Number(a.shared||0),options:Array.isArray(a.options)?a.options.map(String):[]}}return{id:`question_${n+1}`,type:"text",title:String(t),description:"",shared:0,options:[]}})):(console.log("æ‰€æœ‰è§£ææ–¹æ³•éƒ½å¤±è´¥ï¼Œè¿”å›ç©ºæ•°ç»„"),[])}catch(o){return console.error("è§£æå…¬å¼€é—®é¢˜æ•°ç»„å¤±è´¥:",o),console.error("é”™è¯¯è¯¦æƒ…:",o),[{id:"sample_1",type:"single",title:"æ‚¨å¯¹æˆ‘ä»¬çš„æœåŠ¡æ»¡æ„å—ï¼Ÿ",options:["éå¸¸æ»¡æ„","æ»¡æ„","ä¸€èˆ¬","ä¸æ»¡æ„","éå¸¸ä¸æ»¡æ„"]},{id:"sample_2",type:"multiple",title:"æ‚¨å¸Œæœ›æˆ‘ä»¬åœ¨å“ªäº›æ–¹é¢æ”¹è¿›ï¼Ÿï¼ˆå¤šé€‰ï¼‰",options:["æœåŠ¡è´¨é‡","å“åº”é€Ÿåº¦","äº§å“åŠŸèƒ½","ç”¨æˆ·ä½“éªŒ","ä»·æ ¼"]},{id:"sample_3",type:"text",title:"è¯·ç•™ä¸‹æ‚¨çš„å®è´µæ„è§å’Œå»ºè®®ï¼š"}]}}async function me(l,o){try{console.log("Submitting questionnaire answers to backend:",{questionnaireId:l,answers:o});const t=await he(),n={questionnaireId:l,answer:JSON.stringify(o),writerIp:t},a=await b.post(`${x}/answer/submit`,n,{headers:{"Content-Type":"application/json"}});return a.status===200?(console.log("Questionnaire answers submitted successfully"),{success:!0,message:"é—®å·æäº¤æˆåŠŸï¼Œæ„Ÿè°¢æ‚¨çš„å‚ä¸ï¼"}):(console.error("Failed to submit questionnaire answers:",a),{success:!1,message:"æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"})}catch(t){return console.error("Error submitting questionnaire answers:",t),b.isAxiosError(t)?{success:!1,message:`æäº¤å¤±è´¥ï¼š${t.response?.data?.message||t.response?.data||"ç½‘ç»œé”™è¯¯"}`}:{success:!1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥"}}}async function he(){try{const l=["https://api.ipify.org?format=json","https://httpbin.org/ip","https://api.ip.sb/ip"];for(const o of l)try{const t=new AbortController,n=setTimeout(()=>t.abort(),3e3),a=await fetch(o,{signal:t.signal});clearTimeout(n);const f=await a.json();if(f.ip)return f.ip;if(f.origin)return f.origin;if(typeof f=="string")return f}catch(t){console.warn(`Failed to get IP from ${o}:`,t);continue}return"unknown"}catch(l){return console.warn("Failed to get client IP:",l),"unknown"}}async function be(l,o){try{const t=`questionnaire_draft_${l}`,n={answers:o,saveTime:new Date().toISOString()};return localStorage.setItem(t,JSON.stringify(n)),console.log("Public draft saved locally:",n),{success:!0,message:"è‰ç¨¿å·²ä¿å­˜åˆ°æœ¬åœ°"}}catch(t){return console.error("Error saving public questionnaire draft:",t),{success:!1,message:"è‰ç¨¿ä¿å­˜å¤±è´¥"}}}function _e(l){try{const o=`questionnaire_draft_${l}`,t=localStorage.getItem(o);if(t){const n=JSON.parse(t);return console.log("Public draft loaded from local:",n),n.answers||null}return null}catch(o){return console.error("Error loading public questionnaire draft:",o),null}}const qe={class:"questionnaire-form"},we={key:0,class:"success-overlay"},Ae={class:"page-header"},ke={class:"header-content"},Ie={class:"page-title"},Se={key:0,class:"page-subtitle"},$e={key:0,class:"loading-section"},xe={key:1,class:"error-section"},Te={class:"error-content"},Pe={key:0,class:"error-debug-info"},De={class:"debug-details"},Ce={key:2,class:"questionnaire-container"},Me={class:"questionnaire-card"},Oe={class:"questionnaire-info"},Qe={class:"questionnaire-title"},Ne={class:"questionnaire-meta"},Ue={class:"meta-item"},Ee={class:"meta-item"},je={class:"question-header"},Re={class:"question-number"},Ve={class:"question-content"},Fe={class:"question-title"},Le={key:0,class:"question-description"},Be={class:"question-type"},Je={class:"type-badge"},Ke={class:"question-input"},ze={key:0,class:"input-group"},Ge=["id","onUpdate:modelValue","name","value"],He=["for"],We={class:"option-text"},Xe={key:1,class:"input-group"},Ye=["id","onUpdate:modelValue","value"],Ze=["for"],es={class:"option-text"},ss={key:2,class:"input-group"},ts=["onUpdate:modelValue"],os=["value"],ns={key:3,class:"input-group"},is=["onUpdate:modelValue"],as={class:"submit-section"},ls={class:"submit-actions"},rs=["disabled"],us=["disabled"],cs={key:3,class:"debug-panel"},ds={class:"debug-content"},ps={class:"message-content"},fs={key:2,class:"success-overlay"},gs=Z({__name:"questionnaire_form",setup(l){const o=se(),t=w(null),n=w([]),a=ee({}),f=w(!0),m=w(!1),T=w(!1),_=w({text:"",type:"success"}),v=A(()=>o.params.id),O=A(()=>!1),k=A(()=>({timestamp:new Date().toISOString(),questionnaireId:v.value,apiBaseUrl:"http://localhost:8081",questionnairePath:`/questionnaire/${v.value}`,modelPath:`/model/${v.value}`})),Q=A(()=>{if(!t.value)return!1;try{return pe(t.value.questionnaireStatus).active}catch{return!1}}),F=A(()=>Math.max(1,Math.ceil(n.value.length*.5))),N=A(()=>n.value.length>0&&n.value.some(i=>a[i.id]!==void 0&&a[i.id]!==""));async function U(){f.value=!0;try{console.log("å¼€å§‹åŠ è½½é—®å·ï¼ŒID:",v.value),console.log("APIé…ç½®:",{baseUrl:"http://localhost:8081"});const i=await V();if(console.log("APIè¿æ¥çŠ¶æ€:",i),!i){p("APIæœåŠ¡ä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨","error");return}const e=await fe(v.value);console.log("é—®å·æ•°æ®:",e),e?(t.value=e,console.log("é—®å·åŠ è½½æˆåŠŸ:",e.questionnaireTitle),await L(),z(),p("é—®å·åŠ è½½æˆåŠŸ","success")):(console.error("é—®å·æ•°æ®ä¸ºç©º"),p("æœªæ‰¾åˆ°æŒ‡å®šçš„é—®å·ï¼Œè¯·æ£€æŸ¥é—®å·IDæ˜¯å¦æ­£ç¡®","error"))}catch(i){console.error("åŠ è½½é—®å·å¼‚å¸¸:",i);let e="åŠ è½½é—®å·å¤±è´¥";i instanceof Error&&(i.message.includes("404")?e="é—®å·ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤":i.message.includes("500")?e="æœåŠ¡å™¨å†…éƒ¨é”™è¯¯":i.message.includes("Network Error")&&(e="ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡")),p(e,"error")}finally{f.value=!1}}async function L(){if(!t.value){console.error("é—®å·æ•°æ®ä¸ºç©ºï¼Œæ— æ³•åŠ è½½é—®é¢˜");return}try{console.log("å¼€å§‹åŠ è½½é—®é¢˜ï¼Œæ¨¡å‹ID:",t.value.modelId);const i=await ge(t.value.modelId);if(console.log("é—®é¢˜æ¨¡å‹æ•°æ®:",i),i&&i.questionsArray){console.log("å‡†å¤‡è§£æé—®é¢˜ï¼ŒquestionsArrayç±»å‹:",typeof i.questionsArray),console.log("questionsArrayå†…å®¹:",i.questionsArray);const e=await ye(i.questionsArray);n.value=e,console.log("é—®é¢˜è§£æç»“æœ:",e),console.log("è§£æåçš„é—®é¢˜æ•°é‡:",e.length),e.forEach(r=>{r.type==="multiple"?a[r.id]=[]:a[r.id]=""}),console.log("é—®é¢˜åŠ è½½å®Œæˆ:",n.value.length,"ä¸ªé—®é¢˜"),e.length>0&&p(`é—®å·åŠ è½½æˆåŠŸï¼Œå…±${e.length}ä¸ªé—®é¢˜`,"success"),e.length===0&&p("è¯¥é—®å·æš‚æ— é—®é¢˜ï¼Œè¯·è”ç³»é—®å·å‘å¸ƒè€…","warning")}else console.error("é—®é¢˜æ¨¡å‹æ•°æ®ä¸ºç©ºæˆ–ç¼ºå°‘questionsArray"),console.log("æ¨¡å‹å¯¹è±¡é”®å€¼:",i?Object.keys(i):"æ¨¡å‹ä¸ºnull"),p("é—®é¢˜æ•°æ®ä¸ºç©ºï¼Œè¯·æ£€æŸ¥é—®å·é…ç½®","error")}catch(i){console.error("åŠ è½½é—®é¢˜å¼‚å¸¸:",i);let e="åŠ è½½é—®é¢˜å¤±è´¥";i instanceof Error&&(i.message.includes("404")?e="é—®é¢˜æ¨¡å‹ä¸å­˜åœ¨":i.message.includes("500")&&(e="æœåŠ¡å™¨é”™è¯¯ï¼Œæ— æ³•åŠ è½½é—®é¢˜")),p(e,"error")}}async function B(){if(!N.value){p("è¯·å®Œæˆæ‰€æœ‰é—®é¢˜åå†æäº¤","warning");return}m.value=!0;try{const i=await me(v.value,a);if(i.success){T.value=!0;const e=`questionnaire_submitted_${v.value}`,r={submittedAt:new Date().toISOString(),questionnaireId:v.value,questionnaireTitle:t.value?.questionnaireTitle||"é—®å·è°ƒæŸ¥"};ce(e,JSON.stringify(r),30),console.log("é—®å·æäº¤æ ‡è¯†å·²ä¿å­˜:",e),p(i.message,"success"),G()}else p(i.message,"error")}catch(i){console.error("Failed to submit questionnaire:",i),p("æäº¤å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","error")}finally{m.value=!1}}async function J(){try{const i=await be(v.value,a);p(i.message,i.success?"success":"error")}catch(i){console.error("Failed to save draft:",i),p("ä¿å­˜å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•","error")}}async function K(){try{p("æ­£åœ¨æµ‹è¯•APIè¿æ¥...","info"),await V()?(p("APIè¿æ¥æµ‹è¯•æˆåŠŸï¼","success"),console.log("APIè¿æ¥æ­£å¸¸:",{baseUrl:"http://localhost:8081"})):p("APIè¿æ¥æµ‹è¯•å¤±è´¥ï¼šæœåŠ¡å™¨æ— å“åº”","error")}catch(i){console.error("APIè¿æ¥æµ‹è¯•å¼‚å¸¸:",i),p("APIè¿æ¥æµ‹è¯•å¼‚å¸¸ï¼šç½‘ç»œé”™è¯¯æˆ–æœåŠ¡å™¨ä¸å¯ç”¨","error")}}function z(){const i=_e(v.value);i&&(Object.assign(a,i),p("å·²åŠ è½½ä¸Šæ¬¡ä¿å­˜çš„è‰ç¨¿","info"))}function G(){try{const i=`questionnaire_draft_${v.value}`;localStorage.removeItem(i)}catch(i){console.error("Failed to clear draft:",i)}}function H(){if(t.value){if(!Q.value)return"è¯¥é—®å·å½“å‰æœªå¼€æ”¾ï¼Œè¯·è”ç³»é—®å·å‘å¸ƒè€…ã€‚é—®å·å¯èƒ½å·²ç»“æŸæˆ–å°šæœªå¼€å§‹ã€‚"}else return"æœªæ‰¾åˆ°æŒ‡å®šçš„é—®å·ï¼Œè¯·æ£€æŸ¥é“¾æ¥æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœé—®é¢˜æŒç»­ï¼Œè¯·è”ç³»é—®å·å‘å¸ƒè€…ã€‚";return"åŠ è½½è¿‡ç¨‹ä¸­å‘ç”ŸæœªçŸ¥é”™è¯¯ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚"}function W(i){return{single:"å•é€‰é¢˜",multiple:"å¤šé€‰é¢˜",text:"é—®ç­”é¢˜",dropdown:"ä¸‹æ‹‰é¢˜"}[i]||i}function p(i,e){_.value.text=i,_.value.type=e,setTimeout(()=>{E()},3e3)}function E(){_.value.text=""}function X(i){return{success:"fas fa-check-circle",error:"fas fa-exclamation-circle",warning:"fas fa-exclamation-triangle",info:"fas fa-info-circle"}[i]||"fas fa-info-circle"}function Y(){const i=`questionnaire_submitted_${v.value}`;if(ne(i))try{const e=JSON.parse(ie(i)||"{}");return console.log("æ£€æµ‹åˆ°é—®å·å·²æäº¤:",e),T.value=!0,p(`æ‚¨å·²ç»äº ${new Date(e.submittedAt).toLocaleString()} æäº¤è¿‡æ­¤é—®å·`,"info"),!0}catch(e){console.warn("è§£ææäº¤çŠ¶æ€Cookieå¤±è´¥:",e)}return!1}return te(()=>{Y()||U()}),(i,e)=>(c(),u("div",qe,[T.value?(c(),u("div",we,[...e[0]||(e[0]=[j('<div class="success-content" data-v-460dbe56><div class="success-icon" data-v-460dbe56><i class="fas fa-check-circle" data-v-460dbe56></i></div><h3 data-v-460dbe56>æäº¤æˆåŠŸ</h3><p data-v-460dbe56>æ„Ÿè°¢æ‚¨çš„å‚ä¸ï¼æ‚¨çš„å›ç­”å·²æˆåŠŸæäº¤ã€‚</p><p class="submission-note" data-v-460dbe56><i class="fas fa-info-circle" data-v-460dbe56></i> æ¯ä¸ªé—®å·åªèƒ½æäº¤ä¸€æ¬¡ï¼Œæ„Ÿè°¢æ‚¨çš„é…åˆã€‚ </p></div>',1)])])):(c(),u(S,{key:1},[s("div",Ae,[s("div",ke,[s("h1",Ie,d(t.value?.questionnaireTitle||"é—®å·è°ƒæŸ¥"),1),t.value?.questionnaireTitle?(c(),u("p",Se,"æ„Ÿè°¢æ‚¨å‚ä¸æ­¤æ¬¡é—®å·è°ƒæŸ¥")):q("",!0)])]),f.value?(c(),u("div",$e,[...e[1]||(e[1]=[s("div",{class:"loading-spinner"},[s("i",{class:"fas fa-spinner fa-spin"}),s("p",null,"æ­£åœ¨åŠ è½½é—®å·...")],-1)])])):!t.value||!Q.value?(c(),u("div",xe,[s("div",Te,[e[10]||(e[10]=s("i",{class:"fas fa-exclamation-triangle"},null,-1)),s("h3",null,d(t.value?"é—®å·æœªå¯åŠ¨":"é—®å·ä¸å­˜åœ¨"),1),s("p",null,d(H()),1),O.value?(c(),u("div",Pe,[s("details",null,[e[8]||(e[8]=s("summary",null,"è°ƒè¯•ä¿¡æ¯",-1)),s("div",De,[s("p",null,[e[2]||(e[2]=s("strong",null,"é—®å·ID:",-1)),g(" "+d(v.value),1)]),s("p",null,[e[3]||(e[3]=s("strong",null,"é—®å·æ•°æ®:",-1)),g(" "+d(t.value?"å·²åŠ è½½":"æœªåŠ è½½"),1)]),s("p",null,[e[4]||(e[4]=s("strong",null,"é—®å·çŠ¶æ€:",-1)),g(" "+d(t.value?.questionnaireStatus||"æ— "),1)]),s("p",null,[e[5]||(e[5]=s("strong",null,"é—®é¢˜æ•°é‡:",-1)),g(" "+d(n.value.length),1)]),e[6]||(e[6]=s("p",null,[s("strong",null,"APIé…ç½®:")],-1)),e[7]||(e[7]=s("ul",null,[s("li",null,"åŸºç¡€URL: http://localhost:8081"),s("li",null,"é—®å·ç«¯ç‚¹: /questionnaire/:id"),s("li",null,"æ¨¡å‹ç«¯ç‚¹: /model/:id")],-1))])]),s("button",{onClick:U,class:"retry-btn"},[...e[9]||(e[9]=[s("i",{class:"fas fa-redo"},null,-1),g(" é‡æ–°åŠ è½½ ",-1)])])])):q("",!0)])])):(c(),u("div",Ce,[s("div",Me,[s("div",Oe,[s("h2",Qe,d(t.value.questionnaireTitle),1),s("div",Ne,[s("span",Ue,[e[11]||(e[11]=s("i",{class:"fas fa-clock"},null,-1)),g(" é¢„è®¡ç”¨æ—¶: "+d(F.value)+"åˆ†é’Ÿ ",1)]),s("span",Ee,[e[12]||(e[12]=s("i",{class:"fas fa-list-ol"},null,-1)),g(" å…±"+d(n.value.length)+"é“é¢˜ç›® ",1)])])]),s("form",{onSubmit:oe(B,["prevent"]),class:"questions-form"},[(c(!0),u(S,null,P(n.value,(r,I)=>(c(),u("div",{key:r.id,class:"question-item"},[s("div",je,[s("span",Re,d(I+1),1),s("div",Ve,[s("h3",Fe,d(r.title),1),r.description?(c(),u("p",Le,d(r.description),1)):q("",!0)]),s("div",Be,[s("span",Je,d(W(r.type)),1)])]),s("div",Ke,[r.type==="single"?(c(),u("div",ze,[(c(!0),u(S,null,P(r.options,(y,h)=>(c(),u("div",{key:h,class:"option-item"},[D(s("input",{id:`q${I}_${h}`,"onUpdate:modelValue":C=>a[r.id]=C,type:"radio",name:`question_${r.id}`,value:y,class:"radio-input"},null,8,Ge),[[ae,a[r.id]]]),s("label",{for:`q${I}_${h}`,class:"radio-label"},[e[13]||(e[13]=s("span",{class:"radio-custom"},null,-1)),s("span",We,d(y),1)],8,He)]))),128))])):r.type==="multiple"?(c(),u("div",Xe,[(c(!0),u(S,null,P(r.options,(y,h)=>(c(),u("div",{key:h,class:"option-item"},[D(s("input",{id:`q${I}_${h}`,"onUpdate:modelValue":C=>a[r.id]=C,type:"checkbox",value:y,class:"checkbox-input"},null,8,Ye),[[le,a[r.id]]]),s("label",{for:`q${I}_${h}`,class:"checkbox-label"},[e[14]||(e[14]=s("span",{class:"checkbox-custom"},null,-1)),s("span",es,d(y),1)],8,Ze)]))),128))])):r.type==="dropdown"?(c(),u("div",ss,[D(s("select",{"onUpdate:modelValue":y=>a[r.id]=y,class:"select-input"},[e[15]||(e[15]=s("option",{value:""},"è¯·é€‰æ‹©...",-1)),(c(!0),u(S,null,P(r.options,(y,h)=>(c(),u("option",{key:h,value:y},d(y),9,os))),128))],8,ts),[[re,a[r.id]]])])):r.type==="text"?(c(),u("div",ns,[D(s("textarea",{"onUpdate:modelValue":y=>a[r.id]=y,class:"text-input",placeholder:"è¯·è¾“å…¥æ‚¨çš„ç­”æ¡ˆ...",rows:"4"},null,8,is),[[ue,a[r.id]]])])):q("",!0)])]))),128)),s("div",as,[s("div",ls,[s("button",{type:"button",onClick:J,class:"btn btn-secondary",disabled:m.value},[...e[16]||(e[16]=[s("i",{class:"fas fa-save"},null,-1),g(" ä¿å­˜è‰ç¨¿ ",-1)])],8,rs),s("button",{type:"submit",class:"btn btn-primary",disabled:m.value||!N.value},[e[17]||(e[17]=s("i",{class:"fas fa-paper-plane"},null,-1)),g(" "+d(m.value?"æäº¤ä¸­...":"æäº¤é—®å·"),1)],8,us)])])],32)])])),O.value?(c(),u("div",cs,[s("details",null,[e[23]||(e[23]=s("summary",null,"ğŸ”§ è°ƒè¯•ä¿¡æ¯",-1)),s("div",ds,[s("p",null,[e[18]||(e[18]=s("strong",null,"é—®å·ID:",-1)),g(" "+d(k.value.questionnaireId),1)]),s("p",null,[e[19]||(e[19]=s("strong",null,"APIåŸºç¡€URL:",-1)),g(" "+d(k.value.apiBaseUrl),1)]),s("p",null,[e[20]||(e[20]=s("strong",null,"é—®å·ç«¯ç‚¹:",-1)),g(" "+d(k.value.questionnairePath),1)]),s("p",null,[e[21]||(e[21]=s("strong",null,"æ¨¡å‹ç«¯ç‚¹:",-1)),g(" "+d(k.value.modelPath),1)]),s("p",null,[e[22]||(e[22]=s("strong",null,"æ—¶é—´æˆ³:",-1)),g(" "+d(k.value.timestamp),1)]),s("button",{onClick:K,class:"test-btn"},"æµ‹è¯•APIè¿æ¥")])])])):q("",!0),_.value.text?(c(),u("div",{key:4,class:R(["message-container",_.value.type])},[s("div",ps,[s("i",{class:R(X(_.value.type))},null,2),s("span",null,d(_.value.text),1),s("button",{onClick:E,class:"message-close"},[...e[24]||(e[24]=[s("i",{class:"fas fa-times"},null,-1)])])])],2)):q("",!0)],64)),T.value?(c(),u("div",fs,[...e[25]||(e[25]=[j('<div class="success-content" data-v-460dbe56><div class="success-icon" data-v-460dbe56><i class="fas fa-check-circle" data-v-460dbe56></i></div><h3 data-v-460dbe56>æäº¤æˆåŠŸ</h3><p data-v-460dbe56>æ„Ÿè°¢æ‚¨çš„å‚ä¸ï¼æ‚¨çš„å›ç­”å·²æˆåŠŸæäº¤ã€‚</p><p class="submission-note" data-v-460dbe56><i class="fas fa-info-circle" data-v-460dbe56></i> æ¯ä¸ªé—®å·åªèƒ½æäº¤ä¸€æ¬¡ï¼Œæ„Ÿè°¢æ‚¨çš„é…åˆã€‚ </p></div>',1)])])):q("",!0)]))}}),ms=de(gs,[["__scopeId","data-v-460dbe56"]]);export{ms as default};
