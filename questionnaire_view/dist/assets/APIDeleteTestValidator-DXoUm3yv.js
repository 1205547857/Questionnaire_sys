import{d as g}from"./questionDelete-DSnsLirk.js";import{d as b,j as m,a as i,o as d,b as s,p as P,f,e as c,n as p,t as o,F as A,h as E,_ as D}from"./index-BuxX1puY.js";const T={class:"api-test"},y={class:"test-card"},w={class:"test-actions"},L=["disabled"],k={key:0,class:"test-logs"},q={class:"log-container"},x={class:"log-time"},V={class:"log-message"},$={key:1,class:"test-results"},C={class:"result-header"},N={class:"result-details"},S={key:0},B={key:1},R=b({__name:"APIDeleteTestValidator",setup(F){const u=m(!1),v=m([]),a=m(null);function t(n,e="info"){const r=new Date().toLocaleTimeString();v.value.push({time:r,message:n,type:e})}function _(){v.value=[],a.value=null}async function I(){if(!u.value){u.value=!0,t("开始测试删除API...","info");try{const n="api_test_"+Date.now();t(`测试问题ID: ${n}`,"info"),t("测试场景: 统一删除（后端处理所有逻辑）","info");const e=performance.now(),l=await g(n),r=performance.now(),h=Math.round(r-e);t(`API调用耗时: ${h}ms`,"info"),a.value={success:l.success,url:`DELETE /question/delete/${n}`,status:l.success?"200 OK":"Error",message:l.message,error:l.success?null:"删除失败（预期结果，因为测试ID不存在）"},l.success?(t("✅ API调用成功","success"),t(`✅ 删除消息: ${l.message}`,"success")):(t("⚠️  API调用返回失败（预期结果）","warning"),t(`📝 错误消息: ${l.message}`,"info"),t("💡 说明: 测试ID不存在于数据库中，所以删除失败是正常的","info")),t("---","info"),t("测试场景: 第二次删除测试","info"),(await g(n)).success?t("✅ 第二次删除测试成功","success"):t("⚠️ 第二次删除测试失败（预期结果）","warning")}catch(n){t(`❌ 测试过程中发生错误: ${n}`,"error"),a.value={success:!1,url:"N/A",status:"Exception",message:"API调用异常",error:String(n)}}finally{u.value=!1,t("测试完成","info")}}}return t("API测试组件已加载","info"),t("当前配置: DELETE /question/delete/{id}","success"),(n,e)=>(d(),i("div",T,[s("div",y,[e[7]||(e[7]=P('<h3 data-v-ee850673><i class="fas fa-vial" data-v-ee850673></i> 删除API测试验证 </h3><div class="test-info" data-v-ee850673><div class="api-change-info" data-v-ee850673><h4 data-v-ee850673>API变更确认：</h4><div class="change-comparison" data-v-ee850673><div class="old-api" data-v-ee850673><h5 data-v-ee850673>旧版API ❌</h5><code data-v-ee850673>POST /question/delete</code><pre data-v-ee850673>{ &quot;id&quot;: &quot;questionId&quot; }</pre></div><div class="arrow" data-v-ee850673>→</div><div class="new-api" data-v-ee850673><h5 data-v-ee850673>新版API ✅</h5><code data-v-ee850673>DELETE /question/delete/{id}</code><p data-v-ee850673>路径参数传递ID</p></div></div></div><div class="test-status" data-v-ee850673><h4 data-v-ee850673>当前API配置状态：</h4><div class="status-grid" data-v-ee850673><div class="status-item" data-v-ee850673><label data-v-ee850673>HTTP方法:</label><span class="status-value success" data-v-ee850673>DELETE</span></div><div class="status-item" data-v-ee850673><label data-v-ee850673>URL格式:</label><span class="status-value success" data-v-ee850673>/question/delete/{id}</span></div><div class="status-item" data-v-ee850673><label data-v-ee850673>参数类型:</label><span class="status-value success" data-v-ee850673>路径参数</span></div></div></div></div>',2)),s("div",w,[s("button",{onClick:I,class:"btn btn-primary",disabled:u.value},[s("i",{class:p(["fas fa-play",{"fa-spin":u.value}])},null,2),c(" "+o(u.value?"测试中...":"测试删除API"),1)],8,L),s("button",{onClick:_,class:"btn btn-secondary"},[...e[0]||(e[0]=[s("i",{class:"fas fa-broom"},null,-1),c(" 清除日志 ",-1)])])]),v.value.length>0?(d(),i("div",k,[e[1]||(e[1]=s("h4",null,"测试日志：",-1)),s("div",q,[(d(!0),i(A,null,E(v.value,(l,r)=>(d(),i("div",{key:r,class:p(["log-item",l.type])},[s("span",x,o(l.time),1),s("span",V,o(l.message),1)],2))),128))])])):f("",!0),a.value?(d(),i("div",$,[e[6]||(e[6]=s("h4",null,"最近测试结果：",-1)),s("div",{class:p(["result-box",a.value.success?"success":"error"])},[s("div",C,[s("i",{class:p(a.value.success?"fas fa-check-circle":"fas fa-times-circle")},null,2),s("span",null,o(a.value.success?"测试通过":"测试失败"),1)]),s("div",N,[s("p",null,[e[2]||(e[2]=s("strong",null,"请求URL:",-1)),c(" "+o(a.value.url),1)]),s("p",null,[e[3]||(e[3]=s("strong",null,"响应状态:",-1)),c(" "+o(a.value.status),1)]),a.value.message?(d(),i("p",S,[e[4]||(e[4]=s("strong",null,"响应消息:",-1)),c(" "+o(a.value.message),1)])):f("",!0),a.value.error?(d(),i("p",B,[e[5]||(e[5]=s("strong",null,"错误信息:",-1)),c(" "+o(a.value.error),1)])):f("",!0)])],2)])):f("",!0)])]))}}),j=D(R,[["__scopeId","data-v-ee850673"]]);export{j as default};
