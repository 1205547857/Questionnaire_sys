import{d as Te,u as Ce,j as f,c as H,l as qe,a as n,o,b as e,f as d,e as p,g as _,v as T,E as Oe,t as a,s as Me,y as g,n as y,w as S,m as Ve,p as Qe,F as b,h,i as Ne,z as $e,_ as De}from"./index-BuxX1puY.js";import{v as Ue,V as Ie,g as F,a as W,p as Ee,c as Re}from"./questionnaireModel-BJZZgFqq.js";import{getQuestionsByIds as Se,parseQuestionOptions as M,getQuestionTypeIcon as X,getQuestionTypeDisplayName as Y}from"./questionQuery-D67Y8dOg.js";import"./_commonjsHelpers-92s3wAHG.js";const Fe={class:"questionnaire-model-create"},Be={class:"template-info-section"},Le={class:"info-card"},Pe={class:"form-group"},Ae={class:"form-group"},ze={class:"questions-section"},Je={class:"section-header"},je={class:"section-title"},Ke={class:"add-question-buttons"},Ge={key:0,class:"empty-questions"},He={class:"question-header"},We={class:"question-meta"},Xe={class:"question-number"},Ye={class:"question-actions"},Ze=["onClick"],es=["onClick"],ss={class:"question-content"},ts={class:"question-title"},ls={key:0,class:"question-description"},os={class:"question-preview"},ns={class:"question-type-info"},is={key:0,class:"options-preview"},as={class:"options-list"},us={key:0,class:"option-more"},rs={key:0,class:"question-error"},ds={class:"action-buttons"},cs=["disabled"],ps=["disabled"],vs={class:"modal-body"},fs={class:"reference-filters"},ms={class:"search-box"},ys={key:0,class:"loading-state"},gs={key:1,class:"empty-state"},bs={key:2,class:"reference-questions-list"},hs=["onClick"],ks={class:"reference-question-header"},_s={class:"question-type-badge"},ws={class:"reference-question-content"},xs={key:0},Ts={key:1,class:"options-preview"},Cs={class:"options-list"},qs={key:0,class:"option-more"},Os={class:"modal-body"},Ms={key:0,class:"new-question-form"},Vs={class:"form-section"},Qs={class:"form-group"},Ns={class:"form-group"},$s={class:"form-group"},Ds={class:"question-types"},Us=["onClick"],Is={key:0,class:"form-section"},Es={key:0,class:"nested-options-controls"},Rs={class:"checkbox-label"},Ss={class:"options-container"},Fs={class:"option-input-group"},Bs={class:"option-index"},Ls=["onUpdate:modelValue","placeholder"],Ps=["onClick"],As=["onClick"],zs={key:0,class:"child-options-container"},Js={class:"child-option-input-group"},js={class:"child-option-index"},Ks=["onUpdate:modelValue","placeholder"],Gs=["onClick"],Hs={class:"modal-body"},Ws={class:"preview-header"},Xs={class:"preview-title"},Ys={key:0,class:"preview-description"},Zs={class:"preview-content"},et={key:0,class:"preview-empty"},st={key:1,class:"preview-questions"},tt={class:"question-header"},lt={class:"question-number"},ot={class:"question-title"},nt={class:"question-type-indicator"},it={key:0,class:"question-description"},at={class:"question-preview-content"},ut={key:0,class:"options-preview"},rt=["name"],dt={key:1,class:"options-preview"},ct={key:2,class:"options-preview"},pt={class:"dropdown-preview",disabled:""},vt=["value"],ft={key:3,class:"text-preview"},mt={key:4,class:"unknown-type"},yt={class:"preview-footer"},gt={class:"preview-stats"},bt={class:"stat-item"},ht={class:"stat-item"},kt={class:"modal-footer"},_t=["disabled"],wt={class:"message-content"},xt=Te({__name:"questionnaire_model_create",setup(Tt){const ne=$e(),B=Ce(),C=f(""),q=f(""),c=f([]),w=f(!1),L=f(!1),P=f(!1),A=f(!1),z=f(!1),J=f([]),j=f(!1),V=f(""),Q=f(""),i=f(null),N=f(-1),ie=[{value:"single",label:"单选题",icon:"fas fa-dot-circle"},{value:"multiple",label:"多选题",icon:"fas fa-check-square"},{value:"text",label:"文本题",icon:"fas fa-align-left"},{value:"dropdown",label:"下拉选择题",icon:"fas fa-chevron-down"}],x=f({text:"",type:"success"}),$=H(()=>!C.value.trim()||c.value.length===0?!1:Ue(c.value).valid),Z=H(()=>{let t=J.value;if(Q.value&&(t=t.filter(s=>s.questionType===Q.value)),V.value.trim()){const s=V.value.toLowerCase().trim();t=t.filter(l=>l.questionTitle.toLowerCase().includes(s)||l.questionTxt&&l.questionTxt.toLowerCase().includes(s))}return t}),ae=H(()=>i.value&&["single","multiple","dropdown"].includes(i.value.questionType||""));function D(){L.value=!1}function ue(){try{const t={id:F(),type:"new",title:"",description:"",questionType:"single",options:[{text:"",children:[]},{text:"",children:[]}],allowOther:!1,isNested:!1};c.value.push(t),D(),ee(t,c.value.length-1),v("问题已添加，请完善问题信息","success")}catch(t){console.error("添加新问题失败:",t),v("添加问题失败，请重试","error")}}function re(){try{D(),P.value=!0,de()}catch(t){console.error("打开引用问题模态框失败:",t),v("打开引用问题失败，请重试","error")}}function K(){P.value=!1,V.value="",Q.value=""}async function de(){if(console.log("开始加载引用问题..."),!B.isLoggedIn){console.log("用户未登录"),v("请先登录","error");return}console.log("用户数据:",B.userData);const t=B.userData?.question_ids;if(!t||t.length===0){console.log("用户没有问题组件"),J.value=[],v("您还没有创建任何问题组件","info");return}console.log("要获取的问题ID:",t),j.value=!0;try{const s=await Se(t);console.log("获取到的问题:",s),J.value=s,s.length===0?v("未找到可用的问题组件","warning"):v(`加载了 ${s.length} 个问题组件`,"success")}catch(s){console.error("Failed to load reference questions:",s),v("加载问题组件失败: "+s,"error")}finally{j.value=!1}}function ce(t){const s={id:F(),type:"reference",questionId:t.questionId,questionTitle:t.questionTitle,questionType:t.questionType,questionOptions:t.questionOptions,questionTxt:t.questionTxt,canDelete:t.canDelete};c.value.push(s),K(),v("问题已添加到模版","success")}function pe(t){const s=c.value[t],l=G(s);confirm(`确定要移除问题"${l}"吗？`)&&c.value.splice(t,1)}function ee(t,s){t.type==="reference"?i.value=he(t):i.value=JSON.parse(JSON.stringify(t)),N.value=s,A.value=!0}function U(){A.value=!1,i.value=null,N.value=-1}function ve(t){i.value&&(i.value.questionType=t,["single","multiple","dropdown"].includes(t)&&(!i.value.options||i.value.options.length===0)&&(i.value.options=[{text:"",children:[]},{text:"",children:[]}]))}function fe(){i.value?.options&&i.value.options.push({text:"",children:[]})}function me(t){i.value?.options&&i.value.options.length>2&&i.value.options.splice(t,1)}function ye(t){i.value?.options?.[t]&&(i.value.options[t].children||(i.value.options[t].children=[]),i.value.options[t].children.push({text:""}))}function ge(t,s){i.value?.options?.[t]?.children&&i.value.options[t].children.splice(s,1)}function be(){if(i.value&&N.value>=0){const t=W(i.value);if(!t.valid){v(t.message||"问题数据无效","error");return}c.value[N.value]=i.value,U(),v("问题保存成功","success")}}function he(t){try{let s=[];if(t.questionOptions)try{s=M(t.questionOptions).map(r=>({text:r}))}catch(u){console.warn("Failed to parse question options:",u)}const l=t.questionType||"single";return["single","multiple","dropdown"].includes(l)&&s.length===0&&(s=[{text:"选项1"},{text:"选项2"}]),{id:t.id||F(),type:"new",title:t.questionTitle||"未命名问题",description:t.questionTxt||"",questionType:l,options:s,allowOther:!1,isNested:!1}}catch(s){return console.error("Failed to convert reference question:",s),{id:t.id||F(),type:"new",title:t.questionTitle||"未命名问题",description:t.questionTxt||"",questionType:"single",options:[{text:"选项1"},{text:"选项2"}],allowOther:!1,isNested:!1}}}function G(t){return t.type==="reference"?t.questionTitle||"未知问题":t.title||"新建问题"}function I(t){return t.type==="reference"?t.questionTxt||"":t.description||""}function k(t){return t.questionType||"single"}function E(t){const s=k(t);return["single","multiple","dropdown"].includes(s)}function O(t){if(t.type==="reference"&&t.questionOptions)return M(t.questionOptions);if(t.type==="new"&&t.options){const s=[];return t.options.forEach(l=>{l.text.trim()&&(t.isNested&&l.children&&l.children.length>0?l.children.forEach(u=>{u.text.trim()&&s.push(`${l.text} > ${u.text}`)}):s.push(l.text))}),s}return[]}function se(t){return W(t).valid}function ke(t){return W(t).message||""}function _e(){if(!$.value){v("请先完善模版信息和问题设置","warning");return}z.value=!0}function R(){z.value=!1}async function te(){if(!$.value){v("请完善模版信息和问题设置","error");return}w.value=!0;try{console.log("开始保存模版...");const t=await Ee(c.value);console.log("处理完成的问题ID列表:",t),console.log("准备保存的模版数据:",{title:C.value,description:q.value,questionIds:t});const s=await Re(C.value,q.value,t);s.success?(console.log("模版保存成功, ID:",s.modelId),v("问卷模版创建成功！","success"),setTimeout(()=>{ne.push("/page/questionnaire_model_my")},2e3)):(console.error("模版保存失败:",s.message),v(s.message||"保存失败，请稍后重试","error"))}catch(t){console.error("保存模版时发生错误:",t),v(`保存失败: ${t}`,"error")}finally{w.value=!1}}function v(t,s){x.value.text=t,x.value.type=s,setTimeout(()=>{le()},3e3)}function le(){x.value.text=""}function we(t){return{success:"fas fa-check-circle",error:"fas fa-exclamation-circle",warning:"fas fa-exclamation-triangle",info:"fas fa-info-circle"}[t]||"fas fa-info-circle"}function xe(){return"preview_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}return qe(()=>{console.log("问卷模版创建页面已加载")}),(t,s)=>(o(),n("div",Fe,[s[62]||(s[62]=e("div",{class:"page-header"},[e("h1",{class:"page-title"},[e("i",{class:"fas fa-file-alt"}),p(" 创建问卷模版 ")]),e("p",{class:"page-description"},"设计您的问卷模版，支持引用现有问题或直接创建新问题")],-1)),e("div",Be,[e("div",Le,[s[17]||(s[17]=e("h3",{class:"section-title"},[e("i",{class:"fas fa-info-circle"}),p(" 模版信息 ")],-1)),e("div",Pe,[s[15]||(s[15]=e("label",{class:"field-label"},"模版名称 *",-1)),_(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>C.value=l),type:"text",class:"form-input",placeholder:"请输入问卷模版名称",required:""},null,512),[[T,C.value]])]),e("div",Ae,[s[16]||(s[16]=e("label",{class:"field-label"},"模版描述",-1)),_(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=l=>q.value=l),class:"form-textarea",placeholder:"请描述此问卷模版的用途",rows:"3"},null,512),[[T,q.value]])])])]),e("div",ze,[e("div",Je,[e("h3",je,[s[18]||(s[18]=e("i",{class:"fas fa-list-ol"},null,-1)),p(" 问题列表 ("+a(c.value.length)+"个问题) ",1)]),e("div",Ke,[e("button",{onClick:s[2]||(s[2]=l=>L.value=!0),class:"btn btn-primary"},[...s[19]||(s[19]=[e("i",{class:"fas fa-plus"},null,-1),p(" 添加问题 ",-1)])])])]),c.value.length===0?(o(),n("div",Ge,[...s[20]||(s[20]=[e("div",{class:"empty-content"},[e("i",{class:"fas fa-inbox"}),e("h3",null,"还没有添加问题"),e("p",null,'点击"添加问题"开始创建您的问卷模版')],-1)])])):(o(),Oe(g(Ie),{key:1,modelValue:c.value,"onUpdate:modelValue":s[3]||(s[3]=l=>c.value=l),class:"questions-list","item-key":"id",handle:".drag-handle"},{item:Me(({element:l,index:u})=>[e("div",{class:y(["question-item",{invalid:!se(l)}])},[e("div",He,[e("div",We,[s[21]||(s[21]=e("i",{class:"fas fa-grip-vertical drag-handle"},null,-1)),e("span",Xe,a(u+1),1),e("span",{class:y(["question-type-badge",l.type])},a(l.type==="reference"?"引用问题":"新建问题"),3)]),e("div",Ye,[e("button",{onClick:r=>ee(l,u),class:"action-btn edit-btn"},[...s[22]||(s[22]=[e("i",{class:"fas fa-edit"},null,-1)])],8,Ze),e("button",{onClick:r=>pe(u),class:"action-btn delete-btn"},[...s[23]||(s[23]=[e("i",{class:"fas fa-trash"},null,-1)])],8,es)])]),e("div",ss,[e("h4",ts,a(G(l)),1),I(l)?(o(),n("p",ls,a(I(l)),1)):d("",!0),e("div",os,[e("div",ns,[e("i",{class:y(g(X)(k(l)))},null,2),e("span",null,a(g(Y)(k(l))),1)]),E(l)?(o(),n("div",is,[e("div",as,[(o(!0),n(b,null,h(O(l).slice(0,3),(r,m)=>(o(),n("span",{key:m,class:"option-tag"},a(r),1))),128)),O(l).length>3?(o(),n("span",us," +"+a(O(l).length-3)+"个选项 ",1)):d("",!0)])])):d("",!0)])]),se(l)?d("",!0):(o(),n("div",rs,[s[24]||(s[24]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),p(" "+a(ke(l)),1)]))],2)]),_:1},8,["modelValue"]))]),e("div",ds,[e("button",{onClick:s[4]||(s[4]=l=>t.$router.go(-1)),class:"btn btn-secondary"},[...s[25]||(s[25]=[e("i",{class:"fas fa-arrow-left"},null,-1),p(" 返回 ",-1)])]),e("button",{onClick:_e,class:"btn btn-info",disabled:c.value.length===0},[...s[26]||(s[26]=[e("i",{class:"fas fa-eye"},null,-1),p(" 预览模版 ",-1)])],8,cs),e("button",{onClick:te,class:"btn btn-primary",disabled:!$.value||w.value},[e("i",{class:y(w.value?"fas fa-spinner fa-spin":"fas fa-save")},null,2),p(" "+a(w.value?"保存中...":"保存模版"),1)],8,ps)]),L.value?(o(),n("div",{key:0,class:"modal-overlay",onClick:D},[e("div",{class:"modal-content",onClick:s[5]||(s[5]=S(()=>{},["stop"]))},[e("div",{class:"modal-header"},[s[28]||(s[28]=e("h3",null,"添加问题",-1)),e("button",{onClick:D,class:"close-btn"},[...s[27]||(s[27]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",{class:"modal-body"},[e("div",{class:"add-question-options"},[e("div",{class:"option-card",onClick:ue},[...s[29]||(s[29]=[e("div",{class:"option-icon"},[e("i",{class:"fas fa-plus-circle"})],-1),e("div",{class:"option-content"},[e("h4",null,"直接创建问题"),e("p",null,"在模版中直接创建新问题")],-1)])]),e("div",{class:"option-card",onClick:re},[...s[30]||(s[30]=[e("div",{class:"option-icon"},[e("i",{class:"fas fa-link"})],-1),e("div",{class:"option-content"},[e("h4",null,"引用现有问题"),e("p",null,"从您已创建的问题组件中选择")],-1)])])])])])])):d("",!0),P.value?(o(),n("div",{key:1,class:"modal-overlay",onClick:K},[e("div",{class:"modal-content large-modal",onClick:s[8]||(s[8]=S(()=>{},["stop"]))},[e("div",{class:"modal-header"},[s[32]||(s[32]=e("h3",null,"选择问题组件",-1)),e("button",{onClick:K,class:"close-btn"},[...s[31]||(s[31]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",vs,[e("div",fs,[e("div",ms,[s[33]||(s[33]=e("i",{class:"fas fa-search"},null,-1)),_(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>V.value=l),type:"text",placeholder:"搜索问题标题...",class:"search-input"},null,512),[[T,V.value]])]),_(e("select",{"onUpdate:modelValue":s[7]||(s[7]=l=>Q.value=l),class:"type-filter"},[...s[34]||(s[34]=[Qe('<option value="" data-v-234f4957>全部类型</option><option value="single" data-v-234f4957>单选题</option><option value="multiple" data-v-234f4957>多选题</option><option value="text" data-v-234f4957>文本题</option><option value="dropdown" data-v-234f4957>下拉选择题</option>',5)])],512),[[Ve,Q.value]])]),j.value?(o(),n("div",ys,[...s[35]||(s[35]=[e("i",{class:"fas fa-spinner fa-spin"},null,-1),e("p",null,"正在加载问题组件...",-1)])])):Z.value.length===0?(o(),n("div",gs,[...s[36]||(s[36]=[e("i",{class:"fas fa-inbox"},null,-1),e("p",null,"没有找到可引用的问题组件",-1)])])):(o(),n("div",bs,[(o(!0),n(b,null,h(Z.value,l=>(o(),n("div",{key:l.questionId,class:"reference-question-item",onClick:u=>ce(l)},[e("div",ks,[e("div",_s,[e("i",{class:y(g(X)(l.questionType))},null,2),p(" "+a(g(Y)(l.questionType)),1)])]),e("div",ws,[e("h4",null,a(l.questionTitle),1),l.questionTxt?(o(),n("p",xs,a(l.questionTxt),1)):d("",!0),l.questionOptions&&g(M)(l.questionOptions).length>0?(o(),n("div",Ts,[e("div",Cs,[(o(!0),n(b,null,h(g(M)(l.questionOptions).slice(0,3),(u,r)=>(o(),n("span",{key:r,class:"option-tag"},a(u),1))),128)),g(M)(l.questionOptions).length>3?(o(),n("span",qs," +"+a(g(M)(l.questionOptions).length-3)+"个选项 ",1)):d("",!0)])])):d("",!0)])],8,hs))),128))]))])])])):d("",!0),A.value?(o(),n("div",{key:2,class:"modal-overlay",onClick:U},[e("div",{class:"modal-content large-modal",onClick:s[12]||(s[12]=S(()=>{},["stop"]))},[e("div",{class:"modal-header"},[s[38]||(s[38]=e("h3",null,"编辑问题",-1)),e("button",{onClick:U,class:"close-btn"},[...s[37]||(s[37]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",Os,[i.value?(o(),n("div",Ms,[e("div",Vs,[s[42]||(s[42]=e("h3",{class:"section-title"},[e("i",{class:"fas fa-info-circle"}),p(" 基本信息 ")],-1)),e("div",Qs,[s[39]||(s[39]=e("label",{class:"field-label"},"问题标题 *",-1)),_(e("input",{"onUpdate:modelValue":s[9]||(s[9]=l=>i.value.title=l),type:"text",class:"form-input",placeholder:"请输入问题标题",required:""},null,512),[[T,i.value.title]])]),e("div",Ns,[s[40]||(s[40]=e("label",{class:"field-label"},"问题描述",-1)),_(e("textarea",{"onUpdate:modelValue":s[10]||(s[10]=l=>i.value.description=l),class:"form-textarea",placeholder:"请输入问题的详细描述（可选）",rows:"3"},null,512),[[T,i.value.description]])]),e("div",$s,[s[41]||(s[41]=e("label",{class:"field-label"},"问题类型 *",-1)),e("div",Ds,[(o(),n(b,null,h(ie,l=>e("div",{key:l.value,class:y(["type-option",{active:i.value.questionType===l.value}]),onClick:u=>ve(l.value)},[e("i",{class:y(l.icon)},null,2),e("span",null,a(l.label),1)],10,Us)),64))])])]),ae.value?(o(),n("div",Is,[s[50]||(s[50]=e("h3",{class:"section-title"},[e("i",{class:"fas fa-list"}),p(" 选项配置 ")],-1)),i.value.questionType==="dropdown"?(o(),n("div",Es,[e("label",Rs,[_(e("input",{type:"checkbox","onUpdate:modelValue":s[11]||(s[11]=l=>i.value.isNested=l),class:"checkbox-input"},null,512),[[Ne,i.value.isNested]]),s[43]||(s[43]=e("span",{class:"checkbox-custom"},null,-1)),s[44]||(s[44]=e("span",{class:"checkbox-text"},"启用多级下拉列表（如：国家-省份-城市）",-1))])])):d("",!0),e("div",Ss,[(o(!0),n(b,null,h(i.value.options,(l,u)=>(o(),n("div",{key:u,class:y(["option-item",{"nested-option":i.value.isNested&&i.value.questionType==="dropdown"}])},[e("div",Fs,[e("span",Bs,a(u+1),1),_(e("input",{"onUpdate:modelValue":r=>l.text=r,type:"text",class:"option-input",placeholder:i.value.isNested?`一级选项 ${u+1}（如：中国）`:`选项 ${u+1}`,required:""},null,8,Ls),[[T,l.text]]),i.value.isNested&&i.value.questionType==="dropdown"?(o(),n("button",{key:0,type:"button",class:"add-child-btn",onClick:r=>ye(u),title:"添加子选项"},[...s[45]||(s[45]=[e("i",{class:"fas fa-plus"},null,-1)])],8,Ps)):d("",!0),i.value.options&&i.value.options.length>2?(o(),n("button",{key:1,type:"button",class:"remove-option-btn",onClick:r=>me(u)},[...s[46]||(s[46]=[e("i",{class:"fas fa-times"},null,-1)])],8,As)):d("",!0)]),i.value.isNested&&i.value.questionType==="dropdown"&&l.children&&l.children.length>0?(o(),n("div",zs,[(o(!0),n(b,null,h(l.children,(r,m)=>(o(),n("div",{key:m,class:"child-option-item"},[e("div",Js,[s[48]||(s[48]=e("span",{class:"child-option-connector"},"└─",-1)),e("span",js,a(u+1)+"."+a(m+1),1),_(e("input",{"onUpdate:modelValue":oe=>r.text=oe,type:"text",class:"child-option-input",placeholder:`二级选项 ${m+1}（如：北京）`},null,8,Ks),[[T,r.text]]),e("button",{type:"button",class:"remove-child-btn",onClick:oe=>ge(u,m)},[...s[47]||(s[47]=[e("i",{class:"fas fa-times"},null,-1)])],8,Gs)])]))),128))])):d("",!0)],2))),128)),e("button",{type:"button",class:"add-option-btn",onClick:fe},[s[49]||(s[49]=e("i",{class:"fas fa-plus"},null,-1)),p(" "+a(i.value.isNested?"添加一级选项":"添加选项"),1)])])])):d("",!0)])):d("",!0)]),e("div",{class:"modal-footer"},[e("button",{onClick:U,class:"btn btn-secondary"},"取消"),e("button",{onClick:be,class:"btn btn-primary"},"保存修改")])])])):d("",!0),z.value?(o(),n("div",{key:3,class:"modal-overlay",onClick:R},[e("div",{class:"modal-content large-modal preview-modal",onClick:s[14]||(s[14]=S(()=>{},["stop"]))},[e("div",{class:"modal-header"},[s[52]||(s[52]=e("h3",null,[e("i",{class:"fas fa-eye"}),p(" 问卷模版预览 ")],-1)),e("button",{onClick:R,class:"close-btn"},[...s[51]||(s[51]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",Hs,[e("div",Ws,[e("h1",Xs,a(C.value||"未命名问卷模版"),1),q.value?(o(),n("p",Ys,a(q.value),1)):d("",!0)]),e("div",Zs,[c.value.length===0?(o(),n("div",et,[...s[53]||(s[53]=[e("div",{class:"empty-icon"},[e("i",{class:"fas fa-inbox"})],-1),e("p",null,"暂无问题",-1)])])):(o(),n("div",st,[(o(!0),n(b,null,h(c.value,(l,u)=>(o(),n("div",{key:l.id,class:"preview-question"},[e("div",tt,[e("span",lt,a(u+1)+".",1),e("h3",ot,a(G(l)),1),e("span",nt,[e("i",{class:y(g(X)(k(l)))},null,2),p(" "+a(g(Y)(k(l))),1)])]),I(l)?(o(),n("div",it,a(I(l)),1)):d("",!0),e("div",at,[k(l)==="single"&&E(l)?(o(),n("div",ut,[(o(!0),n(b,null,h(O(l),(r,m)=>(o(),n("div",{key:m,class:"option-item single-option"},[e("input",{type:"radio",name:`preview-single-${xe()}`,disabled:""},null,8,rt),e("label",null,a(r),1)]))),128))])):k(l)==="multiple"&&E(l)?(o(),n("div",dt,[(o(!0),n(b,null,h(O(l),(r,m)=>(o(),n("div",{key:m,class:"option-item multiple-option"},[s[54]||(s[54]=e("input",{type:"checkbox",disabled:""},null,-1)),e("label",null,a(r),1)]))),128))])):k(l)==="dropdown"&&E(l)?(o(),n("div",ct,[e("select",pt,[s[55]||(s[55]=e("option",{value:""},"请选择...",-1)),(o(!0),n(b,null,h(O(l),(r,m)=>(o(),n("option",{key:m,value:r},a(r),9,vt))),128))])])):k(l)==="text"?(o(),n("div",ft,[...s[56]||(s[56]=[e("textarea",{placeholder:"请在此输入您的答案...",rows:"3",disabled:"",class:"text-input-preview"},null,-1)])])):(o(),n("div",mt,[...s[57]||(s[57]=[e("p",{class:"unknown-message"},[e("i",{class:"fas fa-exclamation-triangle"}),p(" 未知问题类型或配置不完整 ")],-1)])]))])]))),128))]))]),e("div",yt,[e("div",gt,[e("div",bt,[s[58]||(s[58]=e("i",{class:"fas fa-list-ol"},null,-1)),e("span",null,"共 "+a(c.value.length)+" 个问题",1)]),e("div",ht,[s[59]||(s[59]=e("i",{class:"fas fa-clock"},null,-1)),e("span",null,"预计用时 "+a(Math.max(1,Math.ceil(c.value.length*1.5)))+" 分钟",1)])])])]),e("div",kt,[e("button",{onClick:R,class:"btn btn-secondary"},[...s[60]||(s[60]=[e("i",{class:"fas fa-times"},null,-1),p(" 关闭预览 ",-1)])]),e("button",{onClick:s[13]||(s[13]=l=>{R(),te()}),class:"btn btn-primary",disabled:!$.value||w.value},[e("i",{class:y(w.value?"fas fa-spinner fa-spin":"fas fa-save")},null,2),p(" "+a(w.value?"保存中...":"确认保存"),1)],8,_t)])])])):d("",!0),x.value.text?(o(),n("div",{key:4,class:y(["message-container",x.value.type])},[e("div",wt,[e("i",{class:y(we(x.value.type))},null,2),e("span",null,a(x.value.text),1),e("button",{onClick:le,class:"message-close"},[...s[61]||(s[61]=[e("i",{class:"fas fa-times"},null,-1)])])])],2)):d("",!0)]))}}),Vt=De(xt,[["__scopeId","data-v-234f4957"]]);export{Vt as default};
