import{d as Q,r as C,c as O,a as l,o as i,b as t,e as p,f as r,w as A,g as h,v as x,F as c,h as v,i as w,t as d,n as m,_ as z}from"./index-BuxX1puY.js";import{c as J}from"./question_create-CQqc0PA0.js";const L={class:"question-create-container"},j={class:"question-create-card"},G={class:"card-content"},H={class:"form-section"},K={class:"form-group"},P={class:"form-group"},R={class:"form-group"},W={class:"question-types"},X=["onClick"],Y={key:0,class:"form-section"},Z={key:0,class:"nested-options-controls"},I={class:"checkbox-label"},tt={class:"options-container"},et={class:"option-input-group"},st={class:"option-index"},ot=["onUpdate:modelValue","placeholder"],lt=["onClick"],it=["onClick"],nt={key:0,class:"child-options-container"},at={class:"child-option-input-group"},rt={class:"child-option-index"},dt=["onUpdate:modelValue"],pt=["onClick"],ut={class:"form-section"},ct={class:"settings-grid"},vt={key:0,class:"setting-item"},ft={class:"checkbox-label"},ht={class:"setting-item"},bt={class:"checkbox-label"},yt={class:"form-section"},mt={class:"question-preview"},kt={class:"preview-question"},xt={class:"preview-title"},_t={key:0,class:"preview-description"},wt={class:"preview-content"},gt={key:0,class:"preview-options"},qt=["name"],Ct={key:0,class:"preview-option"},Ot=["name"],Nt={key:1,class:"preview-options"},$t={key:0,class:"preview-option"},Vt={key:2,class:"preview-dropdown"},Ut={key:0,class:"simple-dropdown"},Tt={class:"preview-select",disabled:""},Dt=["value"],St={key:0,value:"other"},Mt={key:0,class:"other-input-container",style:{"margin-top":"0.8rem",display:"none"}},Ft={key:1,class:"nested-dropdown"},Bt={class:"dropdown-level"},Et={class:"preview-select nested-select",disabled:""},Qt=["value"],At={class:"dropdown-label"},zt={class:"preview-select nested-select",disabled:""},Jt=["value"],Lt={key:0,class:"other-input-container"},jt={key:3,class:"preview-text"},Gt={class:"form-actions"},Ht=["disabled"],Kt=Q({__name:"question_center_create",setup(Pt){const N=[{value:"single",label:"单选题",icon:"fas fa-dot-circle"},{value:"multiple",label:"多选题",icon:"fas fa-check-square"},{value:"text",label:"文本题",icon:"fas fa-edit"},{value:"dropdown",label:"下拉列表",icon:"fas fa-chevron-down"}],s=C({title:"",description:"",type:"single",options:[{text:"",children:[]},{text:"",children:[]}],allowOther:!1,isNested:!1,shared:!1}),f=C({text:"",type:"success"}),k=O(()=>["single","multiple","dropdown"].includes(s.type)),_=O(()=>s.title.trim()?k.value?s.options.some(a=>a.text.trim()):!0:!1);function $(a){s.type=a,k.value&&s.options.length===0&&(s.options=[{text:"",children:[]},{text:"",children:[]}])}function V(){s.options.push({text:"",children:[]})}function U(a){s.options[a].children||(s.options[a].children=[]),s.options[a].children.push({text:""})}function T(a,e){s.options[a].children.splice(e,1)}function D(a){s.options.length>2&&s.options.splice(a,1)}function S(){s.title="",s.description="",s.type="single",s.options=[{text:"",children:[]},{text:"",children:[]}],s.allowOther=!1,s.isNested=!1,g()}function M(){if(!_.value){b("请填写完整的问题信息","error");return}b("预览功能正在开发中...","info")}function F(){if(!k.value)return[];const a=[];return s.options.forEach(e=>{e.text.trim()&&(s.isNested&&e.children.length>0?e.children.forEach(o=>{o.text.trim()&&a.push(`${e.text} > ${o.text}`)}):a.push(e.text))}),a}function B(){if(!_.value){b("请填写完整的问题信息","error");return}const a=F(),e=JSON.stringify(a),o=s.shared?1:0;J(s.type,e,s.title,s.description,o),console.log("保存问题:",{type:s.type,options:a,optionsString:e,title:s.title,description:s.description,shared:o}),b("问题保存成功！","success")}function E(){s.shared?b("问题已设为共享状态","success"):b("已取消共享状态","info")}function b(a,e){f.text=a,f.type=e,setTimeout(()=>{g()},3e3)}function g(){f.text=""}return(a,e)=>(i(),l("div",L,[t("div",j,[e[38]||(e[38]=t("div",{class:"card-header"},[t("h1",{class:"page-title"},[t("i",{class:"fas fa-plus-circle"}),p(" 创建问题 ")]),t("p",{class:"page-subtitle"},"设计您的问卷问题，支持多种题型")],-1)),t("div",G,[t("form",{onSubmit:A(B,["prevent"]),class:"question-form"},[t("div",H,[e[8]||(e[8]=t("h3",{class:"section-title"},[t("i",{class:"fas fa-info-circle"}),p(" 基本信息 ")],-1)),t("div",K,[e[5]||(e[5]=t("label",{class:"field-label",for:"questionTitle"},"问题标题 *",-1)),h(t("input",{id:"questionTitle","onUpdate:modelValue":e[0]||(e[0]=o=>s.title=o),type:"text",class:"form-input",placeholder:"请输入问题标题",required:""},null,512),[[x,s.title]])]),t("div",P,[e[6]||(e[6]=t("label",{class:"field-label",for:"questionDescription"},"问题描述",-1)),h(t("textarea",{id:"questionDescription","onUpdate:modelValue":e[1]||(e[1]=o=>s.description=o),class:"form-textarea",placeholder:"请输入问题的详细描述（可选）",rows:"3"},null,512),[[x,s.description]])]),t("div",R,[e[7]||(e[7]=t("label",{class:"field-label"},"问题类型 *",-1)),t("div",W,[(i(),l(c,null,v(N,o=>t("div",{key:o.value,class:m(["type-option",{active:s.type===o.value}]),onClick:n=>$(o.value)},[t("i",{class:m(o.icon)},null,2),t("span",null,d(o.label),1)],10,X)),64))])])]),k.value?(i(),l("div",Y,[e[16]||(e[16]=t("h3",{class:"section-title"},[t("i",{class:"fas fa-list"}),p(" 选项配置 ")],-1)),s.type==="dropdown"?(i(),l("div",Z,[t("label",I,[h(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=o=>s.isNested=o),class:"checkbox-input"},null,512),[[w,s.isNested]]),e[9]||(e[9]=t("span",{class:"checkbox-custom"},null,-1)),e[10]||(e[10]=t("span",{class:"checkbox-text"},"启用多级下拉列表（如：国家-省份-城市）",-1))])])):r("",!0),t("div",tt,[(i(!0),l(c,null,v(s.options,(o,n)=>(i(),l("div",{key:n,class:m(["option-item",{"nested-option":s.isNested&&s.type==="dropdown"}])},[t("div",et,[t("span",st,d(n+1),1),h(t("input",{"onUpdate:modelValue":u=>o.text=u,type:"text",class:"option-input",placeholder:s.isNested?`一级选项 ${n+1}（如：中国）`:`选项 ${n+1}`,required:""},null,8,ot),[[x,o.text]]),s.isNested&&s.type==="dropdown"?(i(),l("button",{key:0,type:"button",class:"add-child-btn",onClick:u=>U(n),title:"添加子选项"},[...e[11]||(e[11]=[t("i",{class:"fas fa-plus"},null,-1)])],8,lt)):r("",!0),s.options.length>2?(i(),l("button",{key:1,type:"button",class:"remove-option-btn",onClick:u=>D(n)},[...e[12]||(e[12]=[t("i",{class:"fas fa-times"},null,-1)])],8,it)):r("",!0)]),s.isNested&&s.type==="dropdown"&&o.children&&o.children.length>0?(i(),l("div",nt,[(i(!0),l(c,null,v(o.children,(u,y)=>(i(),l("div",{key:y,class:"child-option-item"},[t("div",at,[e[14]||(e[14]=t("span",{class:"child-option-connector"},"└─",-1)),t("span",rt,d(n+1)+"."+d(y+1),1),h(t("input",{"onUpdate:modelValue":q=>u.text=q,type:"text",class:"child-option-input",placeholder:"子选项（如：江西省）",required:""},null,8,dt),[[x,u.text]]),t("button",{type:"button",class:"remove-child-option-btn",onClick:q=>T(n,y)},[...e[13]||(e[13]=[t("i",{class:"fas fa-times"},null,-1)])],8,pt)])]))),128))])):r("",!0)],2))),128)),t("button",{type:"button",class:"add-option-btn",onClick:V},[e[15]||(e[15]=t("i",{class:"fas fa-plus"},null,-1)),p(" "+d(s.isNested&&s.type==="dropdown"?"添加一级选项":"添加选项"),1)])])])):r("",!0),t("div",ut,[e[22]||(e[22]=t("h3",{class:"section-title"},[t("i",{class:"fas fa-cog"}),p(" 问题设置 ")],-1)),t("div",ct,[s.type==="multiple"?(i(),l("div",vt,[t("label",ft,[h(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=o=>s.allowOther=o),class:"checkbox-input"},null,512),[[w,s.allowOther]]),e[17]||(e[17]=t("span",{class:"checkbox-custom"},null,-1)),e[18]||(e[18]=t("span",{class:"checkbox-text"},"允许填写其他选项",-1))])])):r("",!0),t("div",ht,[t("label",bt,[h(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=o=>s.shared=o),onChange:E,class:"checkbox-input"},null,544),[[w,s.shared]]),e[19]||(e[19]=t("span",{class:"checkbox-custom"},null,-1)),e[20]||(e[20]=t("span",{class:"checkbox-text"},"设为共享问题",-1))]),e[21]||(e[21]=t("p",{class:"setting-description"}," 共享问题可以被其他用户引用和使用 ",-1))])])]),t("div",yt,[e[34]||(e[34]=t("h3",{class:"section-title"},[t("i",{class:"fas fa-eye"}),p(" 问题预览 ")],-1)),t("div",mt,[t("div",kt,[t("h4",xt,d(s.title||"问题标题"),1),s.description?(i(),l("p",_t,d(s.description),1)):r("",!0),t("div",wt,[s.type==="single"?(i(),l("div",gt,[(i(!0),l(c,null,v(s.options,(o,n)=>(i(),l("div",{key:n,class:"preview-option"},[t("input",{type:"radio",name:`preview-${Date.now()}`,disabled:""},null,8,qt),t("span",null,d(o.text||`选项 ${n+1}`),1)]))),128)),s.allowOther?(i(),l("div",Ct,[t("input",{type:"radio",name:`preview-${Date.now()}`,disabled:""},null,8,Ot),e[23]||(e[23]=t("span",null,"其他：",-1)),e[24]||(e[24]=t("input",{type:"text",placeholder:"请填写",disabled:"",class:"other-input"},null,-1))])):r("",!0)])):s.type==="multiple"?(i(),l("div",Nt,[(i(!0),l(c,null,v(s.options,(o,n)=>(i(),l("div",{key:n,class:"preview-option"},[e[25]||(e[25]=t("input",{type:"checkbox",disabled:""},null,-1)),t("span",null,d(o.text||`选项 ${n+1}`),1)]))),128)),s.allowOther?(i(),l("div",$t,[...e[26]||(e[26]=[t("input",{type:"checkbox",disabled:""},null,-1),t("span",null,"其他：",-1),t("input",{type:"text",placeholder:"请填写",disabled:"",class:"other-input"},null,-1)])])):r("",!0)])):s.type==="dropdown"?(i(),l("div",Vt,[s.isNested?(i(),l("div",Ft,[t("div",Bt,[e[30]||(e[30]=t("label",{class:"dropdown-label"},"第一级选择：",-1)),t("select",Et,[e[29]||(e[29]=t("option",{value:""},"请选择...",-1)),(i(!0),l(c,null,v(s.options,(o,n)=>(i(),l("option",{key:n,value:o.text},d(o.text||`选项 ${n+1}`),9,Qt))),128))])]),(i(!0),l(c,null,v(s.options.filter(o=>o.children&&o.children.length>0),(o,n)=>(i(),l("div",{key:n,class:"dropdown-level secondary-level"},[t("label",At,'当选择"'+d(o.text)+'"时的第二级选择：',1),t("select",zt,[e[31]||(e[31]=t("option",{value:""},"请选择...",-1)),(i(!0),l(c,null,v(o.children,(u,y)=>(i(),l("option",{key:y,value:u.text},d(u.text||`子选项 ${y+1}`),9,Jt))),128))])]))),128)),s.allowOther?(i(),l("div",Lt,[...e[32]||(e[32]=[t("label",{class:"other-label"},"允许填写其他选项",-1)])])):r("",!0)])):(i(),l("div",Ut,[t("select",Tt,[e[27]||(e[27]=t("option",{value:""},"请选择...",-1)),(i(!0),l(c,null,v(s.options,(o,n)=>(i(),l("option",{key:n,value:o.text},d(o.text||`选项 ${n+1}`),9,Dt))),128)),s.allowOther?(i(),l("option",St,"其他")):r("",!0)]),s.allowOther?(i(),l("div",Mt,[...e[28]||(e[28]=[t("label",{class:"other-label"},"请填写其他选项：",-1),t("input",{type:"text",placeholder:"请填写",disabled:"",class:"other-input"},null,-1)])])):r("",!0)]))])):s.type==="text"?(i(),l("div",jt,[...e[33]||(e[33]=[t("textarea",{placeholder:"请在此输入您的答案...",disabled:"",rows:"3",class:"preview-textarea"},null,-1)])])):r("",!0)])])])]),t("div",Gt,[t("button",{type:"button",class:"btn btn-secondary",onClick:S},[...e[35]||(e[35]=[t("i",{class:"fas fa-undo"},null,-1),p(" 重置 ",-1)])]),t("button",{type:"button",class:"btn btn-outline",onClick:M},[...e[36]||(e[36]=[t("i",{class:"fas fa-eye"},null,-1),p(" 预览 ",-1)])]),t("button",{type:"submit",class:"btn btn-primary",disabled:!_.value},[...e[37]||(e[37]=[t("i",{class:"fas fa-save"},null,-1),p(" 保存问题 ",-1)])],8,Ht)])],32),f.text?(i(),l("div",{key:0,class:m(["message",f.type])},[t("i",{class:m(f.type==="success"?"fas fa-check-circle":"fas fa-exclamation-triangle")},null,2),p(" "+d(f.text),1)],2)):r("",!0)])])]))}}),Xt=z(Kt,[["__scopeId","data-v-f69bc513"]]);export{Xt as default};
