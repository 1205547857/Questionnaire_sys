import{B as m,_ as p,a,o as l,b as e,e as n,f as h,w as M,g as u,v as d,t as c}from"./index-BuxX1puY.js";async function _(i,s,f){return m.post("http://localhost:8081/user/register",{userEmail:s,userPw:f,userName:i}).then(o=>(console.log("request successful:",o),o.data!="fail"?(console.log("Registration successful"),!0):(console.log("Registration failed"),!1))).catch(o=>(console.error("Error:",o),!1))}const v={data(){return{username:"",email:"",password:"",errorMessage:"",successMessage:"",isLoading:!1}},methods:{clearMessages(){this.errorMessage="",this.successMessage=""},validateForm(){return this.username.trim()?this.username.length<2?(this.errorMessage="用户名长度不能少于2位字符",!1):this.username.length>20?(this.errorMessage="用户名长度不能超过20位字符",!1):this.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)?this.password.trim()?this.password.length<6?(this.errorMessage="密码长度不能少于6位",!1):this.password.includes(" ")?(this.errorMessage="密码不能包含空格",!1):!0:(this.errorMessage="请输入密码",!1):(this.errorMessage="请输入正确的邮箱格式",!1):(this.errorMessage="请输入邮箱地址",!1):(this.errorMessage="请输入用户名",!1)},async register(){if(this.clearMessages(),!!this.validateForm()){this.isLoading=!0;try{await _(this.username,this.email,this.password)?(this.successMessage="注册成功！正在跳转到登录页面...",setTimeout(()=>{this.$router.push("/login")},2e3)):this.errorMessage="注册失败，该邮箱可能已被注册，请更换邮箱后重试"}catch(i){console.error("Register error:",i),this.errorMessage="网络错误，请检查网络连接后重试"}finally{this.isLoading=!1}}}}},b={class:"auth-container"},y={class:"auth-card"},w={class:"card-content"},x={class:"form-group"},k={class:"field-content"},L={class:"form-group"},V={class:"field-content"},R={class:"form-group"},q={class:"field-content"},B={class:"action-section"},N=["disabled"],T={key:0,class:"fas fa-spinner fa-spin"},U={key:1,class:"fas fa-user-plus"},D={key:0,class:"error-message"},E={key:1,class:"success-message"};function F(i,s,f,o,r,g){return l(),a("div",b,[e("div",y,[s[9]||(s[9]=e("div",{class:"card-header"},[e("h1",{class:"page-title"},[e("i",{class:"fas fa-user-plus"}),n(" 注册账号 ")])],-1)),e("div",w,[e("form",{onSubmit:s[3]||(s[3]=M((...t)=>g.register&&g.register(...t),["prevent"])),class:"auth-form"},[e("div",x,[s[4]||(s[4]=e("label",{class:"field-label"},"用户名:",-1)),e("div",k,[u(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>r.username=t),class:"form-input",placeholder:"请输入用户名",required:""},null,512),[[d,r.username]])])]),e("div",L,[s[5]||(s[5]=e("label",{class:"field-label"},"邮箱:",-1)),e("div",V,[u(e("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=t=>r.email=t),class:"form-input",placeholder:"请输入邮箱地址",required:""},null,512),[[d,r.email]])])]),e("div",R,[s[6]||(s[6]=e("label",{class:"field-label"},"密码:",-1)),e("div",q,[u(e("input",{type:"password","onUpdate:modelValue":s[2]||(s[2]=t=>r.password=t),class:"form-input",placeholder:"请输入密码",required:""},null,512),[[d,r.password]])])]),e("div",B,[e("button",{type:"submit",class:"btn btn-primary",disabled:r.isLoading},[r.isLoading?(l(),a("i",T)):(l(),a("i",U)),n(" "+c(r.isLoading?"正在注册...":"注册"),1)],8,N)])],32),r.errorMessage?(l(),a("div",D,[s[7]||(s[7]=e("i",{class:"fas fa-exclamation-triangle"},null,-1)),n(" "+c(r.errorMessage),1)])):h("",!0),r.successMessage?(l(),a("div",E,[s[8]||(s[8]=e("i",{class:"fas fa-check-circle"},null,-1)),n(" "+c(r.successMessage),1)])):h("",!0)])])])}const S=p(v,[["render",F],["__scopeId","data-v-90b6eb20"]]);export{S as default};
